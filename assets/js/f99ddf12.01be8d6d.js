"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[90256],{446403:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>n,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"cwa/scripts/9d69d33c-688e-4c02-adfe-cef7c8ecd766","title":"Shadow Copy - Audit Complete Statistics DV","description":"This document outlines a script that records data related to Shadow Copy for individual systems into a custom table. It details the dependencies, system properties, process, and output of the script, including instructions for ensuring compatibility with blocking applications.","source":"@site/docs/cwa/scripts/Shadow Copy - Audit Complete Statistics DV.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/9d69d33c-688e-4c02-adfe-cef7c8ecd766","permalink":"/docs/cwa/scripts/9d69d33c-688e-4c02-adfe-cef7c8ecd766","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Shadow Copy - Audit Complete Statistics DV.md","tags":[{"inline":false,"label":"Backup","permalink":"/docs/tags/backup","description":"Documents detailing backup solutions and data protection strategies"},{"inline":false,"label":"Database","permalink":"/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Security","permalink":"/docs/tags/security","description":"Documents discussing security measures and practices for IT systems"},{"inline":false,"label":"Windows","permalink":"/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"9d69d33c-688e-4c02-adfe-cef7c8ecd766","title":"Shadow Copy - Audit Complete Statistics DV","title_meta":"Shadow Copy - Audit Complete Statistics DV","keywords":["shadowcopy","data","collection","windows","script"],"description":"This document outlines a script that records data related to Shadow Copy for individual systems into a custom table. It details the dependencies, system properties, process, and output of the script, including instructions for ensuring compatibility with blocking applications.","tags":["backup","database","security","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Setup Probe LTCache Share","permalink":"/docs/cwa/scripts/06ceeffc-d91b-4936-9889-101e02b683ca"},"next":{"title":"Shadow Copy - Schedule Shadow Copies","permalink":"/docs/cwa/scripts/f16b700f-16c7-43f9-8470-84861d7f5c52"}}');var a=s(474848),c=s(28453);const n={id:"9d69d33c-688e-4c02-adfe-cef7c8ecd766",title:"Shadow Copy - Audit Complete Statistics DV",title_meta:"Shadow Copy - Audit Complete Statistics DV",keywords:["shadowcopy","data","collection","windows","script"],description:"This document outlines a script that records data related to Shadow Copy for individual systems into a custom table. It details the dependencies, system properties, process, and output of the script, including instructions for ensuring compatibility with blocking applications.",tags:["backup","database","security","windows"],draft:!1,unlisted:!1},o=void 0,d={},r=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"System Property",id:"system-property",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function l(e){const t={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsxs)(t.p,{children:["This script records data related to Shadow Copy for individual systems into a ",(0,a.jsx)(t.a,{href:"/docs/cwa/tables/59bbf54a-55af-42fa-9e77-cd0b105122de",children:"Custom Table - plugin_proval_shadowcopystats"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note:"})," Get the below MD5 file hash whitelisted for the script to work in the environment where ThreatLocker or any blocking application is installed.",(0,a.jsx)(t.br,{}),"\n","MD5 File Hash: ",(0,a.jsx)(t.code,{children:"E69A5AD2CDCF7B20C7205D4A7BEC08C4"})]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Time Saved by Automation:"})," 5 Minutes"]}),"\n",(0,a.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Sample Run",src:s(818940).A+"",width:"481",height:"351"})}),"\n",(0,a.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/docs/cwa/dataviews/69110f54-d14f-4691-a68f-56bbc88b5fb3",children:"Dataview - Windows - Shadow Copy State [Script]"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/docs/cwa/tables/59bbf54a-55af-42fa-9e77-cd0b105122de",children:"Custom Table - plugin_proval_shadowcopystats"})}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"system-property",children:"System Property"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Name"}),(0,a.jsx)(t.th,{children:"Example"}),(0,a.jsx)(t.th,{children:"Required"}),(0,a.jsx)(t.th,{children:"Default"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsx)(t.tbody,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Proval_ShadowCopyMaxAgeInDays"}),(0,a.jsx)(t.td,{children:"10"}),(0,a.jsx)(t.td,{children:"True"}),(0,a.jsx)(t.td,{children:"10"}),(0,a.jsxs)(t.td,{children:["This property is required so that the ",(0,a.jsx)(t.a,{href:"/docs/cwa/monitors/ef826863-c354-4a97-9ba8-8ad2a3c65e40",children:"Monitor - Missing Recent ShadowCopy [Autofix]"})," can trigger this script to run as autofix to collect the latest data."]})]})})]}),"\n",(0,a.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,a.jsx)(t.p,{children:"This script will first verify that the target system is a Windows-based device; if not, it will exit the script."}),"\n",(0,a.jsxs)(t.p,{children:["The script will verify that the ",(0,a.jsx)(t.a,{href:"/docs/cwa/tables/59bbf54a-55af-42fa-9e77-cd0b105122de",children:"Custom Table - plugin_proval_shadowcopystats"})," has been created. If it does not exist in the database, it will create it."]}),"\n",(0,a.jsx)(t.p,{children:"The script will then ensure that the data for the target machine is removed so it can be updated."}),"\n",(0,a.jsx)(t.p,{children:'The script will execute the PowerShell script, which will gather all the necessary data/stats about Shadow Copy on this system. The PowerShell script will also generate the "INSERT INTO" statement used to insert the data into the custom table. If the PowerShell script returns "No Shadow Copy Found," it will exit the script without modifying the custom table.'}),"\n",(0,a.jsx)(t.p,{children:"Finally, the script will run the SQL statement against the Automate server to insert the data into the database."}),"\n",(0,a.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Script logs."}),"\n",(0,a.jsxs)(t.li,{children:["Custom table ",(0,a.jsx)(t.a,{href:"/docs/cwa/tables/59bbf54a-55af-42fa-9e77-cd0b105122de",children:"Custom Table - plugin_proval_shadowcopystats"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:["Dataview ",(0,a.jsx)(t.a,{href:"/docs/cwa/dataviews/69110f54-d14f-4691-a68f-56bbc88b5fb3",children:"Dataview - Windows - Shadow Copy State [Script]"}),"."]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},818940:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/image_1-ba4f0ebac2330535628746bdf8961e6c.png"},28453:(e,t,s)=>{s.d(t,{R:()=>n,x:()=>o});var i=s(296540);const a={},c=i.createContext(a);function n(e){const t=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),i.createElement(c.Provider,{value:t},e.children)}}}]);