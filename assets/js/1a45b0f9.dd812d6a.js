"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[28705],{743061:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"cwa/scripts/002e4435-9142-4373-a857-6bf91c16d7af","title":"Nightly Database Backup Monitoring","description":"This document describes a script that creates a ticket in the ProValtech Autotask Portal when the ConnectWise Automate nightly backup fails. It details the process, variables, and system properties involved in the script, ensuring timely notifications for backup issues.","source":"@site/docs/cwa/scripts/Nightly Database Backup Monitoring.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/002e4435-9142-4373-a857-6bf91c16d7af","permalink":"/docs/cwa/scripts/002e4435-9142-4373-a857-6bf91c16d7af","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Nightly Database Backup Monitoring.md","tags":[{"inline":false,"label":"Backup","permalink":"/docs/tags/backup","description":"Documents detailing backup solutions and data protection strategies"},{"inline":false,"label":"ConnectWise","permalink":"/docs/tags/connectwise","description":"Documents on ConnectWise platforms for IT service management"},{"inline":false,"label":"Database","permalink":"/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Email","permalink":"/docs/tags/email","description":"Documents about email systems and their management"}],"version":"current","frontMatter":{"id":"002e4435-9142-4373-a857-6bf91c16d7af","title":"Nightly Database Backup Monitoring","title_meta":"Nightly Database Backup Monitoring","keywords":["ticket","backup","failure","connectwise","automate","email","notification"],"description":"This document describes a script that creates a ticket in the ProValtech Autotask Portal when the ConnectWise Automate nightly backup fails. It details the process, variables, and system properties involved in the script, ensuring timely notifications for backup issues.","tags":["backup","connectwise","database","email"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"NewDisk Thresholds - Set","permalink":"/docs/cwa/scripts/9abc689e-609d-48dc-9f90-802c69ddef9b"},"next":{"title":"NinjaRMMAgent Uninstaller","permalink":"/docs/cwa/scripts/52254d14-bc24-4f32-bb3c-7447756ec15f"}}');var i=s(474848),n=s(28453);const r={id:"002e4435-9142-4373-a857-6bf91c16d7af",title:"Nightly Database Backup Monitoring",title_meta:"Nightly Database Backup Monitoring",keywords:["ticket","backup","failure","connectwise","automate","email","notification"],description:"This document describes a script that creates a ticket in the ProValtech Autotask Portal when the ConnectWise Automate nightly backup fails. It details the process, variables, and system properties involved in the script, ensuring timely notifications for backup issues.",tags:["backup","connectwise","database","email"],draft:!1,unlisted:!1},c=void 0,l={},o=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Variables",id:"variables",level:2},{value:"System Properties",id:"system-properties",level:4},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"This script will create a ticket in our (ProValtech's) Autotask Portal if the ConnectWise Automate nightly backup fails."}),"\n",(0,i.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,i.jsx)(t.p,{children:"It is a client script and should be scheduled in the Dashboard's Offline Computer."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Sample Run",src:s(354196).A+"",width:"1000",height:"295"})}),"\n",(0,i.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Name"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"BackupAudit"}),(0,i.jsx)(t.td,{children:"Outcome of the SQL query used to rectify the backup status"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Subject"}),(0,i.jsx)(t.td,{children:"Email's Subject"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Body"}),(0,i.jsx)(t.td,{children:"Email's Body"})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"system-properties",children:"System Properties"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Name"}),(0,i.jsx)(t.th,{children:"Default"}),(0,i.jsx)(t.th,{children:"Required"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"ProVal_Alerts_Email_Address"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"mailto:Alerts@provaltech.com",children:"Alerts@provaltech.com"})}),(0,i.jsx)(t.td,{children:"True"}),(0,i.jsxs)(t.td,{children:["By default, the system property ",(0,i.jsx)(t.code,{children:"ProVal_Alerts_Email_Address"})," will be set to ",(0,i.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"}),". This can be changed if these alerts should be directed elsewhere."]})]})})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"System Properties",src:s(528687).A+"",width:"913",height:"243"})}),"\n",(0,i.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Verifies whether the previous backup was successful or not."}),"\n",(0,i.jsxs)(t.li,{children:["Sends an email to the address(es) saved in the Global Variable ",(0,i.jsx)(t.code,{children:"@Email@"})," if there's a failure in the previous database backup."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Email Subject:"})," Nightly Database Backup Failed for %redirhostname%"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Email Body:"})}),"\n",(0,i.jsx)(t.p,{children:"The scheduled nightly MySQL backup for ConnectWise Automate did not appear to run. Every night, a SQL backup job is supposed to create a zip file containing a backup of all the tables for CWA. Please investigate."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"OR"})}),"\n",(0,i.jsx)(t.p,{children:"The last nightly MySQL backup for ConnectWise Automate has failed. Every night, a SQL backup job is supposed to create a zip file containing a backup of all the tables for CWA. Please investigate."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"OR"})}),"\n",(0,i.jsx)(t.p,{children:"A MySQL backup for ConnectWise Automate was generated last night, but it is lower than 100 MB in size. Typically, these backup files are greater than 1 GB in size, so this generally means the backup failed. Please investigate."}),"\n",(0,i.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Email"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},354196:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/image_1-aaa2a1b6e68041a59f0eafb29a73afb6.png"},528687:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/image_2-43e3dd51718b7cb08734a9b069f9bc65.png"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>c});var a=s(296540);const i={},n=a.createContext(i);function r(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);