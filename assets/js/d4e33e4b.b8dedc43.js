"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[80789],{633317:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"cwa/monitors/88dfd269-1df7-4c57-a898-9445dec162b5","title":"Automate Server - Unwanted Event Logs Monitoring","description":"This document outlines the setup for a remote monitor that generates an urgent ticket in ProVal\'s Autotask portal when critical events from specified sources occur more than 10 times within 60 minutes on the Automate server. It is specifically designed for On-Prem partners and includes detailed configuration settings and dependencies.","source":"@site/docs/cwa/monitors/Automate Server - Unwanted Event Logs Monitoring.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/88dfd269-1df7-4c57-a898-9445dec162b5","permalink":"/docs/cwa/monitors/88dfd269-1df7-4c57-a898-9445dec162b5","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Automate Server - Unwanted Event Logs Monitoring.md","tags":[{"inline":false,"label":"Autotask","permalink":"/docs/tags/autotask","description":"Documents on Autotask software for IT management and task automation"}],"version":"current","frontMatter":{"id":"88dfd269-1df7-4c57-a898-9445dec162b5","title":"Automate Server - Unwanted Event Logs Monitoring","title_meta":"Automate Server - Unwanted Event Logs Monitoring","keywords":["ticket","monitoring","automate","event","error","critical"],"description":"This document outlines the setup for a remote monitor that generates an urgent ticket in ProVal\'s Autotask portal when critical events from specified sources occur more than 10 times within 60 minutes on the Automate server. It is specifically designed for On-Prem partners and includes detailed configuration settings and dependencies.","tags":["autotask"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Automate - Locations Missing Cache Drive","permalink":"/docs/cwa/monitors/2f39cd93-5ff5-4a89-8d8f-5cb847210a8b"},"next":{"title":"Automate User Account Locked Out","permalink":"/docs/cwa/monitors/c02990b4-9809-497b-9655-d161c1091142"}}');var o=n(474848),s=n(28453);const i={id:"88dfd269-1df7-4c57-a898-9445dec162b5",title:"Automate Server - Unwanted Event Logs Monitoring",title_meta:"Automate Server - Unwanted Event Logs Monitoring",keywords:["ticket","monitoring","automate","event","error","critical"],description:"This document outlines the setup for a remote monitor that generates an urgent ticket in ProVal's Autotask portal when critical events from specified sources occur more than 10 times within 60 minutes on the Automate server. It is specifically designed for On-Prem partners and includes detailed configuration settings and dependencies.",tags:["autotask"],draft:!1,unlisted:!1},a=void 0,c={},d=[{value:"Summary",id:"summary",level:2},{value:"Details",id:"details",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Target",id:"target",level:2}];function l(e){const t={a:"a",br:"br",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(t.p,{children:'The purpose of this remote monitor is to generate an urgent ticket in our (ProVal\'s) Autotask portal in the event that an error or critical event from either "DBAgent", "ASPWCC2", or "MySQL" event sources is generated more than 10 times within the past 60 minutes on the Automate server.'}),"\n",(0,o.jsx)(t.p,{children:"This should be applied to On-Prem partners only."}),"\n",(0,o.jsx)(t.h2,{id:"details",children:"Details"}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:'Suggested "Limit to"'}),": Labtech Server",(0,o.jsx)(t.br,{}),"\n",(0,o.jsx)(t.strong,{children:"Suggested Alert Style"}),": Once",(0,o.jsx)(t.br,{}),"\n",(0,o.jsx)(t.strong,{children:"Suggested Alert Template"}),": \u25b3 Automate Server - Event Log Monitoring [Autofix]"]}),"\n",(0,o.jsx)(t.p,{children:"Insert the details of the monitor in the table below."}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Check Action"}),(0,o.jsx)(t.th,{children:"Server Address"}),(0,o.jsx)(t.th,{children:"Check Type"}),(0,o.jsx)(t.th,{children:"Check Value"}),(0,o.jsx)(t.th,{children:"Comparator"}),(0,o.jsx)(t.th,{children:"Interval"}),(0,o.jsx)(t.th,{children:"Result"})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"System"}),(0,o.jsx)(t.td,{children:"127.0.0.1"}),(0,o.jsx)(t.td,{children:"Run File"}),(0,o.jsx)(t.td,{children:(0,o.jsx)(t.strong,{children:"See Below"})}),(0,o.jsx)(t.td,{children:"Contains"}),(0,o.jsx)(t.td,{children:"3600"}),(0,o.jsx)(t.td,{children:"OK"})]})})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Check Value:"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:'C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy Bypass -Command "$ErrorActionPreference= \\"SilentlyContinue\\"; $Logs = (Get-winevent -LogName \'Application\',\'RMM System\' |Where-Object {$_.ProviderName -match \'DBAgent|ASPWCC2|MySQL\' -and $_.Level -in (1,2,3) -and $_.TimeCreated -gt (Get-Date).Addhours(-1)}|select-object -Property ProviderName, ID, LevelDisplayName  |Group-Object -Property ID,LevelDisplayName,ProviderName |Sort-Object -Property Count -Descending | Select-Object -Property group, Count |Where-Object {$_.Count -gt 10}); IF($Logs){$OutCome = \\"Following Event logs Occurred more than 10 times in the last 60 Minutes`r`n\\"; Foreach ($Log in $Logs) {$OutLog= $Log.group | Select-Object  -property ProviderName, ID, LevelDisplayName -Unique; $OutCome += \\"`r`nEvent Source: $($OutLog.ProviderName)`r`nEVentID: $($OutLog.ID)`r`nEvent Type: $($OutLog.LevelDisplayName)`r`nNumber Of Occurences: $($Log.Count)`r`n\\" }; return \\"$($OutCome)\\"} Else {return \'OK\'}"\n'})}),"\n",(0,o.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{href:"/docs/cwa/scripts/f36b7367-99c7-478b-abc9-6802182431e4",children:"Automate Server - Event Log Monitoring [Autofix]"})}),"\n",(0,o.jsx)(t.h2,{id:"target",children:"Target"}),"\n",(0,o.jsxs)(t.p,{children:["Service ",(0,o.jsx)(t.a,{href:"http://plans.Windows",children:"Plans.Windows"})," servers. Server Roles. MSP Specific Servers. Labtech Server"]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(296540);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);