"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[40499],{339746:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"cwa/scripts/45074a99-85a8-4e7f-bda4-775697504bad","title":"User Management - Purge Local Account and Profile","description":"This document outlines a script designed to completely remove and purge local accounts, including UserSID, from the agent. It can operate manually or automatically, depending on the configuration. The script saves approximately 5 minutes of time by automating the removal process for inactive accounts.","source":"@site/docs/cwa/scripts/User Management - Purge Local Account and Profile.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/45074a99-85a8-4e7f-bda4-775697504bad","permalink":"/proval-docs/docs/cwa/scripts/45074a99-85a8-4e7f-bda4-775697504bad","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/User Management - Purge Local Account and Profile.md","tags":[{"inline":false,"label":"Cleanup","permalink":"/proval-docs/docs/tags/cleanup","description":"Documents on system cleanup processes and tools to free up resources"},{"inline":false,"label":"Logging","permalink":"/proval-docs/docs/tags/logging","description":"Documents related to log management and analysis for systems"}],"version":"current","frontMatter":{"id":"45074a99-85a8-4e7f-bda4-775697504bad","title":"User Management - Purge Local Account and Profile","title_meta":"User Management - Purge Local Account and Profile","keywords":["remove","local","accounts","purge","user","management"],"description":"This document outlines a script designed to completely remove and purge local accounts, including UserSID, from the agent. It can operate manually or automatically, depending on the configuration. The script saves approximately 5 minutes of time by automating the removal process for inactive accounts.","tags":["cleanup","logging"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"User Management - Profile Audit","permalink":"/proval-docs/docs/cwa/scripts/6eace5fa-3c7d-45ae-a52c-66aa854ddde7"},"next":{"title":"User Profile - Get Information","permalink":"/proval-docs/docs/cwa/scripts/91d80bf6-68c8-4025-b285-d07390b860c8"}}');var r=n(474848),a=n(28453);const i={id:"45074a99-85a8-4e7f-bda4-775697504bad",title:"User Management - Purge Local Account and Profile",title_meta:"User Management - Purge Local Account and Profile",keywords:["remove","local","accounts","purge","user","management"],description:"This document outlines a script designed to completely remove and purge local accounts, including UserSID, from the agent. It can operate manually or automatically, depending on the configuration. The script saves approximately 5 minutes of time by automating the removal process for inactive accounts.",tags:["cleanup","logging"],draft:!1,unlisted:!1},l=void 0,o={},c=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Variables",id:"variables",level:2},{value:"Global Parameters",id:"global-parameters",level:4},{value:"User Parameters",id:"user-parameters",level:4},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={a:"a",h2:"h2",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(t.p,{children:"This script can be used to completely remove/purge local accounts (including UserSID) manually and automatically from the agent."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Time Saved by Automation:"})," 5 Minutes"]}),"\n",(0,r.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Sample Run",src:n(450406).A+"",width:"482",height:"393"})}),"\n",(0,r.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"@custom_proval_computer_accounts (Table)"}),"\n",(0,r.jsx)(t.li,{children:"@User management - Profile Audit (Script)"}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/proval-docs/docs/cwa/monitors/370f7dfe-cf48-40d6-a611-d6a02811393c",children:"Local User Detection Not Logged In From 90 Days"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Variable"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"psout"}),(0,r.jsx)(t.td,{children:"This contains PowerShell script output indicating whether the complete profile was removed or not."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"fieldname"}),(0,r.jsx)(t.td,{children:"This contains a list of user accounts inactive for 90 days"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"status"}),(0,r.jsx)(t.td,{children:"It detects the dependent monitor status for the agent"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"global-parameters",children:"Global Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"LogPath"}),(0,r.jsx)(t.td,{children:"C:/temp/Remove-LocalUserProfile.log"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"This path stores the logging of the completed script."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"AutoPurge"}),(0,r.jsx)(t.td,{children:"False"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"False -- Auto Purge is off, Usernames required; True -- Auto Purge is ON, Usernames not required"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"user-parameters",children:"User Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Usernames"}),(0,r.jsx)(t.td,{children:"user1,user2,user3"}),(0,r.jsx)(t.td,{children:"True/False"}),(0,r.jsx)(t.td,{children:"Provide a list of users to remove when AutoPurge = False; leave blank for AutoPurge = True."})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This script can be used to perform both manual removal of users and automatic purge."}),"\n",(0,r.jsx)(t.li,{children:"For automatic purge, set AutoPurge = True; the usernames not logged in for more than 90 days will be picked from the dependent monitor, and this script will trigger as an autofix to remove them."}),"\n",(0,r.jsx)(t.li,{children:"For manual purge, provide the usernames to remove from the agent."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Script log"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},450406:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image_1-ff23da6e9d9461cf0e417c2a6718b81e.png"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(296540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);