"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[95892],{362704:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"cwa/scripts/581b4986-28e0-41df-bff8-c5179414c9ee","title":"Agent Monitors - Remove Disk Monitors for Missing Drives","description":"This document outlines a script designed to clean up older remote drive space monitors for non-existent drives on Windows systems. It provides guidance on when to run the script, including examples of error messages and monitors that indicate the need for cleanup. The process of the script and its output are also detailed.","source":"@site/docs/cwa/scripts/Agent Monitors - Remove Disk Monitors for Missing Drives.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/581b4986-28e0-41df-bff8-c5179414c9ee","permalink":"/proval-docs/docs/cwa/scripts/581b4986-28e0-41df-bff8-c5179414c9ee","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Agent Monitors - Remove Disk Monitors for Missing Drives.md","tags":[{"inline":false,"label":"Cleanup","permalink":"/proval-docs/docs/tags/cleanup","description":"Documents on system cleanup processes and tools to free up resources"},{"inline":false,"label":"Logging","permalink":"/proval-docs/docs/tags/logging","description":"Documents related to log management and analysis for systems"},{"inline":false,"label":"SQL","permalink":"/proval-docs/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"},{"inline":false,"label":"Windows","permalink":"/proval-docs/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"581b4986-28e0-41df-bff8-c5179414c9ee","title":"Agent Monitors - Remove Disk Monitors for Missing Drives","title_meta":"Agent Monitors - Remove Disk Monitors for Missing Drives","keywords":["cleanup","remote","drive","space","monitor"],"description":"This document outlines a script designed to clean up older remote drive space monitors for non-existent drives on Windows systems. It provides guidance on when to run the script, including examples of error messages and monitors that indicate the need for cleanup. The process of the script and its output are also detailed.","tags":["cleanup","logging","sql","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Agent Monitors - Disk - Remove and Rebuild - ProVal","permalink":"/proval-docs/docs/cwa/scripts/3af8bbf0-532f-43c5-a2ea-980be9031730"},"next":{"title":"Agents Migration Monitoring - Client-Level","permalink":"/proval-docs/docs/cwa/scripts/1a561427-06ea-4c8c-b752-d1ad312007ab"}}');var i=t(474848),o=t(28453);const r={id:"581b4986-28e0-41df-bff8-c5179414c9ee",title:"Agent Monitors - Remove Disk Monitors for Missing Drives",title_meta:"Agent Monitors - Remove Disk Monitors for Missing Drives",keywords:["cleanup","remote","drive","space","monitor"],description:"This document outlines a script designed to clean up older remote drive space monitors for non-existent drives on Windows systems. It provides guidance on when to run the script, including examples of error messages and monitors that indicate the need for cleanup. The process of the script and its output are also detailed.",tags:["cleanup","logging","sql","windows"],draft:!1,unlisted:!1},a=void 0,c={},d=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function l(e){const s={br:"br",h2:"h2",img:"img",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(s.p,{children:"This script is used to clean up older remote drive space monitors for drives that no longer exist on Windows systems."}),"\n",(0,i.jsxs)(s.p,{children:["If there are tickets related to the following example message, this script should be run against those systems.",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Example:"}),(0,i.jsx)(s.br,{}),"\n","\"Unable to query drive 'H:' for free space as the drive is not found: Could not find the drive 'H://'. The drive might not be ready or might not be mapped.\""]}),"\n",(0,i.jsx)(s.p,{children:'Alternatively, if there are Remote (System) monitors showing similar "Return Information" to the screenshot below.'}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Screenshot",src:t(82622).A+"",width:"750",height:"477"})}),"\n",(0,i.jsx)(s.p,{children:"It is safe to run this script against any Windows system."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Time Saved by Automation:"})," 5 Minutes"]}),"\n",(0,i.jsx)(s.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,i.jsxs)(s.p,{children:["The target should be any Windows machine reporting inaccurate values for remote drive space monitoring (Drive Space Critical monitors).",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Note:"})," This script CAN be run against offline agents."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Sample Run Screenshot",src:t(168373).A+"",width:"479",height:"348"})}),"\n",(0,i.jsx)(s.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsx)(s.p,{children:"None at this time."}),"\n",(0,i.jsx)(s.h2,{id:"process",children:"Process"}),"\n",(0,i.jsx)(s.p,{children:"This script will first ensure the machine is a Windows device; otherwise, it will exit."}),"\n",(0,i.jsx)(s.p,{children:"The script will create a log message indicating it will be cleaning up the broken remote drive space monitors."}),"\n",(0,i.jsx)(s.p,{children:"The script will then run two different SQL queries to remove the broken remote drive space monitors."}),"\n",(0,i.jsx)(s.h2,{id:"output",children:"Output"}),"\n",(0,i.jsx)(s.p,{children:"Script log only."})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},82622:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/image_1-628947d57f0d133011c00c67043ddd33.png"},168373:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/image_2-f61b14ac5001ece83007d0878ec0c315.png"},28453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>a});var n=t(296540);const i={},o=n.createContext(i);function r(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);