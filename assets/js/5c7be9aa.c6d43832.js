"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[59200],{167313:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>A,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"cwa/monitors/88f2c503-bd4b-4bb5-83d0-72f5fb6a0137","title":"DNS Service Monitoring","description":"This document outlines a PowerShell remote monitor designed to ensure the DNS service is running on Windows servers. It provides details on alert styles, suggested settings, and ticketing information for when the service is not operational.","source":"@site/docs/cwa/monitors/DNS Service Monitoring.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/88f2c503-bd4b-4bb5-83d0-72f5fb6a0137","permalink":"/docs/cwa/monitors/88f2c503-bd4b-4bb5-83d0-72f5fb6a0137","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/DNS Service Monitoring.md","tags":[{"inline":false,"label":"Windows","permalink":"/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"88f2c503-bd4b-4bb5-83d0-72f5fb6a0137","title":"DNS Service Monitoring","title_meta":"DNS Service Monitoring","keywords":["dns","monitor","service","windows","ticketing"],"description":"This document outlines a PowerShell remote monitor designed to ensure the DNS service is running on Windows servers. It provides details on alert styles, suggested settings, and ticketing information for when the service is not operational.","tags":["windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"DHCP Scope(s) < 25% and 20 IP Addresses Available","permalink":"/docs/cwa/monitors/ce8d5706-137b-4a55-8a8b-5041e35421de"},"next":{"title":"DRV - Fragmentation  30 %","permalink":"/docs/cwa/monitors/3e90ea38-4ca4-4dd1-b338-d7700bba9742"}}');var i=n(474848),s=n(28453);const o={id:"88f2c503-bd4b-4bb5-83d0-72f5fb6a0137",title:"DNS Service Monitoring",title_meta:"DNS Service Monitoring",keywords:["dns","monitor","service","windows","ticketing"],description:"This document outlines a PowerShell remote monitor designed to ensure the DNS service is running on Windows servers. It provides details on alert styles, suggested settings, and ticketing information for when the service is not operational.",tags:["windows"],draft:!1,unlisted:!1},a=void 0,d={},l=[{value:"Summary",id:"summary",level:2},{value:"Details",id:"details",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Target",id:"target",level:2},{value:"Ticketing",id:"ticketing",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Implementation Steps",id:"implementation-steps",level:2}];function c(e){const t={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"This PowerShell remote monitor attempts to run the DNS service if it's not running."}),"\n",(0,i.jsx)(t.h2,{id:"details",children:"Details"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:'Suggested "Limit to"'}),": ",(0,i.jsx)(t.code,{children:"All"}),(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Suggested Alert Style"}),": ",(0,i.jsx)(t.code,{children:"Once"}),(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Suggested Alert Template"}),": ",(0,i.jsx)(t.code,{children:"\u25b3 Custom - Ticket Creation - Computer "})]}),"\n",(0,i.jsx)(t.p,{children:"Insert the details of the monitor in the table below."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Check Action"}),(0,i.jsx)(t.th,{children:"Server Address"}),(0,i.jsx)(t.th,{children:"Check Type"}),(0,i.jsx)(t.th,{children:"Check Value"}),(0,i.jsx)(t.th,{children:"Comparator"}),(0,i.jsx)(t.th,{children:"Interval"}),(0,i.jsx)(t.th,{children:"Result"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"System"}),(0,i.jsx)(t.td,{children:"127.0.0.1"}),(0,i.jsx)(t.td,{children:"Run File"}),(0,i.jsx)(t.td,{children:"REDACTED"}),(0,i.jsx)(t.td,{children:"State Based"}),(0,i.jsx)(t.td,{children:"600"}),(0,i.jsx)(t.td,{children:"<Screenshot Below>"})]})})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Screenshot",src:n(792972).A+"",width:"932",height:"97"})}),"\n",(0,i.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"CWM - Automate - Script - Ticket Creation - Computer"})}),"\n",(0,i.jsx)(t.h2,{id:"target",children:"Target"}),"\n",(0,i.jsxs)(t.p,{children:["Windows DNS Servers",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.img,{alt:"Target Image",src:n(713031).A+"",width:"550",height:"274"})]}),"\n",(0,i.jsx)(t.h2,{id:"ticketing",children:"Ticketing"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Subject:"})," ",(0,i.jsx)(t.code,{children:"DNS Service Not Running on \\<Computer Name>"})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Body:"}),(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.code,{children:"'DNS' service is stopped on \\<Computer Name>. Automate attempted to start the service but failed."})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"\\<Failure Reason>"})}),"\n",(0,i.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(t.h2,{id:"implementation-steps",children:"Implementation Steps"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Execute the following SQL query from a RAWSQL monitor set to import the monitor:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sql",children:"SET @Groupid = (SELECT Groupid FROM MasterGroups WHERE `GUID` = '3ac86a4d-f1fb-11e1-b4ec-1231391d2d19');\r\nSET @Alertaction = (SELECT alertactionid FROM alerttemplate WHERE `GUID` = 'ee4bc754-faf7-4667-8bba-8d3923c22c3e');\r\nINSERT INTO groupagents \r\nSELECT '' AS `AgentID`,\r\n`groupid` AS `GroupID`,\r\n'0' AS `SearchID`,\r\n'ProVal - Production - DNS Service Monitoring' AS `Name`,\r\n'6' AS `CheckAction`,\r\n@Alertaction AS `AlertAction`,\r\n'DNS Service Not Running on %ComputerName%~~~Service is running now.!!!DNS Service Not Running on %ComputerName%~~~\\'DNS\\' service is stopped on %ComputerName%. Automate attempted to start the service but failed.' AS `AlertMessage`,\r\n'0' AS `ContactID`,\r\n'600' AS `interval`,\r\n'127.0.0.1' AS `Where`,\r\n'7' AS `What`,\r\n'C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe -ExecutionPolicy Bypass -Command \"$service = (Get-Service -Name \\'DNS\\' -ErrorAction SilentlyContinue); if ($Service) { if ($Service.Status -ne \\'Running\\') { try { Restart-Service -Name \\'DNS\\' -Force -WarningAction SilentlyContinue -ErrorAction Stop } catch { return \\\\\"Failed to start the \\'DNS\\' service. Reason: $($Error[0].Exception.Message)\\\\\"; } } }\"' AS `DataOut`,\r\n'16' AS `Comparor`,\r\n'10|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))|11|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))%7C(^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Failed to start the)|10|^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Failed to start the' AS `DataIn`,\r\n'0' AS `IDField`,\r\n'1' AS `AlertStyle`,\r\n'0' AS `ScriptID`,\r\n'' AS `datacollector`,\r\n'5' AS `Category`,\r\n'0' AS `TicketCategory`,\r\n'1' AS `ScriptTarget`,\r\nUUID() AS `GUID`,\r\n'root' AS `UpdatedBy`,\r\n(NOW()) AS `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid = @groupid\r\nAND m.groupid NOT IN (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - DNS Service Monitoring')\n"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Open the ",(0,i.jsx)(t.code,{children:"Windows DNS Servers"})," group",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.img,{alt:"Windows DNS Servers",src:n(249967).A+"",width:"550",height:"274"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Check the remote monitor and ensure the proper alert template is applied to it.",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.img,{alt:"Check Remote Monitor",src:n(559124).A+"",width:"1000",height:"466"})]}),"\n"]}),"\n"]})]})}function A(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},792972:(e,t,n)=>{n.d(t,{A:()=>r});const r="data:image/png;base64,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"},713031:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/image_2-18da70583a6344daff4e7ea92797b322.png"},249967:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/image_1-18da70583a6344daff4e7ea92797b322.png"},559124:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/image_2-78f2e3b2ca2f8f29b3609360f6913632.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var r=n(296540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);