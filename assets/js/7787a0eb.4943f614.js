"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[24072],{523099:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>n,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"vsa/procedures/ee5b1d9e-eabf-4be4-ad8c-6192b5223cbb","title":"Azure AD Status","description":"This document outlines a procedure to check if a machine is Azure AD joined or registered. It details the logging of actions taken during the process and how to update custom fields based on the machine Azure AD status. The procedure is essential for filtering machines in views based on their Azure AD status.","source":"@site/docs/vsa/procedures/Azure AD Status.md","sourceDirName":"vsa/procedures","slug":"/vsa/procedures/ee5b1d9e-eabf-4be4-ad8c-6192b5223cbb","permalink":"/proval-docs/docs/vsa/procedures/ee5b1d9e-eabf-4be4-ad8c-6192b5223cbb","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/vsa/procedures/Azure AD Status.md","tags":[{"inline":false,"label":"Azure","permalink":"/proval-docs/docs/tags/azure","description":"Documents about Microsoft Azure services and cloud solutions"},{"inline":false,"label":"Logging","permalink":"/proval-docs/docs/tags/logging","description":"Documents related to log management and analysis for systems"}],"version":"current","frontMatter":{"id":"ee5b1d9e-eabf-4be4-ad8c-6192b5223cbb","title":"Azure AD Status","title_meta":"Azure AD Status","keywords":["azure","ad","status","check","procedure","machine"],"description":"This document outlines a procedure to check if a machine is Azure AD joined or registered. It details the logging of actions taken during the process and how to update custom fields based on the machine Azure AD status. The procedure is essential for filtering machines in views based on their Azure AD status.","tags":["azure","logging"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Azure AD Connect Version Audit","permalink":"/proval-docs/docs/vsa/procedures/ee5f96bd-884f-4b2e-af03-9aece0e37d67"},"next":{"title":"BitDefender Endpoint Security Install","permalink":"/proval-docs/docs/vsa/procedures/caaedea1-c322-4a36-833a-62e421c95e2a"}}');var c=t(474848),d=t(28453);const o={id:"ee5b1d9e-eabf-4be4-ad8c-6192b5223cbb",title:"Azure AD Status",title_meta:"Azure AD Status",keywords:["azure","ad","status","check","procedure","machine"],description:"This document outlines a procedure to check if a machine is Azure AD joined or registered. It details the logging of actions taken during the process and how to update custom fields based on the machine Azure AD status. The procedure is essential for filtering machines in views based on their Azure AD status.",tags:["azure","logging"],draft:!1,unlisted:!1},n=void 0,a={},i=[{value:"Summary",id:"summary",level:2},{value:"Example Agent Procedure Log",id:"example-agent-procedure-log",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Output",id:"output",level:2}];function l(e){const s={a:"a",br:"br",h2:"h2",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,c.jsx)(s.p,{children:"This procedure queries the machine to determine if it is Azure AD joined or registered and updates the custom fields as necessary. These machines can then be filtered based on the views."}),"\n",(0,c.jsx)(s.h2,{id:"example-agent-procedure-log",children:"Example Agent Procedure Log"}),"\n",(0,c.jsxs)(s.table,{children:[(0,c.jsx)(s.thead,{children:(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.th,{children:"Time"}),(0,c.jsx)(s.th,{children:"Action"}),(0,c.jsx)(s.th,{children:"Status"}),(0,c.jsx)(s.th,{children:"Contact"})]})}),(0,c.jsxs)(s.tbody,{children:[(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:13 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Azure AD Status"}),(0,c.jsx)(s.td,{children:"Success THEN"}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:13 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)"}),(0,c.jsx)(s.td,{children:"Success THEN"}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:12 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0016"}),(0,c.jsxs)(s.td,{children:["Powershell command complete. Results returned to global variable #global",":psresult","# and saved in Agent's Documents tab of server."]}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:12 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0016"}),(0,c.jsx)(s.td,{children:"Informational: GetFile command overwrote the server file D:/Kaseya/UserProfiles/483503347503094/GetFiles/../docs/psoutput.txt with the new contents from c:/kworking/psoutput.txt in THEN step 3."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:05 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0011"}),(0,c.jsx)(s.td,{children:'Executing 64-bit Powershell command as System: "" -command "if ((& "C:/Windows/System32/dsregcmd.exe" /status'}),(0,c.jsx)(s.td,{children:'Select-String "WorkplaceJoined"'})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:05 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0013"}),(0,c.jsx)(s.td,{children:"Sending output to global variable."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:04 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0008"}),(0,c.jsx)(s.td,{children:'Custom commands detected as if ((& "C:/Windows/System32/dsregcmd.exe" /status'}),(0,c.jsx)(s.td,{children:'Select-String "WorkplaceJoined"'})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:04 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0003"}),(0,c.jsx)(s.td,{children:"No Powershell file variable detected."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:02 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0002"}),(0,c.jsx)(s.td,{children:"Powershell is present."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:00 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Azure AD Status"}),(0,c.jsx)(s.td,{children:"Checking to see if machine is Azure AD Registered"}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:44:00 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)"}),(0,c.jsx)(s.td,{children:"Success THEN"}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:59 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0016"}),(0,c.jsxs)(s.td,{children:["Powershell command complete. Results returned to global variable #global",":psresult","# and saved in Agent's Documents tab of server."]}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:59 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0016"}),(0,c.jsx)(s.td,{children:"Informational: GetFile command overwrote the server file D:/Kaseya/UserProfiles/483503347503094/GetFiles/../docs/psoutput.txt with the new contents from c:/kworking/psoutput.txt in THEN step 3."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:53 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0011"}),(0,c.jsx)(s.td,{children:'Executing 64-bit Powershell command as System: "" -command "if ((& "C:/Windows/System32/dsregcmd.exe" /status'}),(0,c.jsx)(s.td,{children:'Select-String "AzureAdJoined"'})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:53 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0013"}),(0,c.jsx)(s.td,{children:"Sending output to global variable."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:53 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0008"}),(0,c.jsx)(s.td,{children:'Custom commands detected as if ((& "C:/Windows/System32/dsregcmd.exe" /status'}),(0,c.jsx)(s.td,{children:'Select-String "AzureAdJoined"'})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:52 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0003"}),(0,c.jsx)(s.td,{children:"No Powershell file variable detected."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:50 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Execute Powershell Command (64-bit, Run As System)-0002"}),(0,c.jsx)(s.td,{children:"Powershell is present."}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:48 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Azure AD Status"}),(0,c.jsx)(s.td,{children:"Checking to see if machine is Azure AD Joined"}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]}),(0,c.jsxs)(s.tr,{children:[(0,c.jsx)(s.td,{children:"2:43:18 pm 3-Apr-23"}),(0,c.jsx)(s.td,{children:"Run Now - Azure AD Status"}),(0,c.jsxs)(s.td,{children:["Admin ",(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})," scheduled procedure Run Now - Azure AD Status to run at Apr 3 2023 7:43 PM"]}),(0,c.jsx)(s.td,{children:(0,c.jsx)(s.a,{href:"mailto:proaccess@altourage.com",children:"proaccess@altourage.com"})})]})]})]}),"\n",(0,c.jsx)(s.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,c.jsxs)(s.p,{children:["The Agent Procedure relies upon views and custom fields in order to update properly.",(0,c.jsx)(s.br,{}),"\n","Solution: ",(0,c.jsx)(s.a,{href:"/proval-docs/docs/solutions/c852661d-3253-466e-ae17-ee2753885920",children:"https://proval.itglue.com/DOC-5078775-12540674"})]}),"\n",(0,c.jsx)(s.h2,{id:"output",children:"Output"}),"\n",(0,c.jsx)(s.p,{children:"Procedure log files and custom fields."})]})}function h(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>n});var r=t(296540);const c={},d=r.createContext(c);function o(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function n(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);