"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[78076],{380811:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>R,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"cwa/monitors/f201b6f8-2844-484b-b3f8-79e1fd76e819","title":"Hyper-V Replication Status Approved","description":"This document provides a detailed guide on implementing monitoring for Hyper-V replication status within your environment. It includes SQL queries for setting up alerts, troubleshooting steps for replication issues, and examples to ensure proper configuration.","source":"@site/docs/cwa/monitors/Hyper-V Replication Status Approved.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/f201b6f8-2844-484b-b3f8-79e1fd76e819","permalink":"/docs/cwa/monitors/f201b6f8-2844-484b-b3f8-79e1fd76e819","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Hyper-V Replication Status Approved.md","tags":[{"inline":false,"label":"SQL","permalink":"/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"},{"inline":false,"label":"Virtualization","permalink":"/docs/tags/virtualization","description":"Documents covering virtualization technologies and their applications"}],"version":"current","frontMatter":{"id":"f201b6f8-2844-484b-b3f8-79e1fd76e819","title":"Hyper-V Replication Status Approved","title_meta":"Hyper-V Replication Status Approved","keywords":["hyper-v","replication","monitoring","alerts","troubleshooting"],"description":"This document provides a detailed guide on implementing monitoring for Hyper-V replication status within your environment. It includes SQL queries for setting up alerts, troubleshooting steps for replication issues, and examples to ensure proper configuration.","tags":["sql","virtualization"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"How To - Create a Service Monitor","permalink":"/docs/cwa/monitors/bc0be991-ae75-4429-aeb5-3eb1f31375b5"},"next":{"title":"Hyper-V Replication Status","permalink":"/docs/cwa/monitors/c768b83d-adcf-4de8-8b4f-ac3d65679161"}}');var a=n(474848),i=n(28453);const o={id:"f201b6f8-2844-484b-b3f8-79e1fd76e819",title:"Hyper-V Replication Status Approved",title_meta:"Hyper-V Replication Status Approved",keywords:["hyper-v","replication","monitoring","alerts","troubleshooting"],description:"This document provides a detailed guide on implementing monitoring for Hyper-V replication status within your environment. It includes SQL queries for setting up alerts, troubleshooting steps for replication issues, and examples to ensure proper configuration.",tags:["sql","virtualization"],draft:!1,unlisted:!1},s=void 0,c={},l=[{value:"Implementation",id:"implementation",level:2}];function d(e){const t={br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Copy the following query and replace ",(0,a.jsx)(t.strong,{children:"YOUR COMMA SEPARATED LIST OF GROUPID(S)"})," with the GroupID(s) of the relevant groups:",(0,a.jsx)(t.br,{}),"\n","(The string to replace can be found at the very bottom of the query, right after ",(0,a.jsx)(t.strong,{children:"WHERE"}),")"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"INSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n'0' as `SearchID`,\r\n'ProVal - Production - Hyper-V Replication Status' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'Hyper-V Replication Failed on %CLIENTNAME%//%COMPUTERNAME%~~~The issue with the Hyper-V Replication is resolved.!!!Hyper-V Replication Failed on %CLIENTNAME%//%COMPUTERNAME%~~~Replication state of each problematic VM is outlined below:\\n\\n%RESULT%\\n\\nIt indicates that there is an issue with the replication process or with the replication target. Here are some basic troubleshooting steps that can help to address these issues:\\n\\n1. Check the replication settings: Ensure that the replication settings are configured correctly and that they are enabled for the virtual machine. Also, check that the replication target is configured correctly and is accessible.\\n\\n2. Check the replication network: Ensure that the replication network is functioning properly and that there are no issues with connectivity or bandwidth. Verify that firewalls and other security measures are not blocking replication traffic.\\n\\n3. Check the health of the virtual machine: Check the health of the virtual machine to ensure that it is not experiencing any issues that could affect replication. This includes checking for storage or network issues, as well as any errors or warnings in the virtual machine logs.\\n\\n4. Check the replication logs: Review the replication logs to identify any errors or warnings that could be causing the replication state to show as \"Critical\" or \"Warning\". This can help to pinpoint the source of the issue and guide further troubleshooting steps.\\n\\n5. Restart the replication process: Try restarting the replication process to see if this resolves the issue. This can be done by stopping and starting the replication services or by disabling and re-enabling replication for the virtual machine.' as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'3600' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C://Windows//System32//WindowsPowerShell//v1.0//powershell.exe -ExecutionPolicy Bypass -Command \"$ErroractionPreference= /\\'SilentlyContinue/\\'; Get-VMReplication | Where-Object {($_.health -like /\\'Critical/\\') -or ($_.health -like /\\'Warning/\\')} | Foreach-Object {Write-Output ////\\\"$($_.name) replication state: $($_.health)////\\\"}\"' as `DataOut`,\r\n'9' as `Comparor`,\r\n'replication state:' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'16' as `Category`,\r\n'0' as `TicketCategory`,\r\n'0' as `ScriptTarget`,\r\nCONCAT(\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1)\r\n) as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (YOUR COMMA SEPARATED LIST OF GROUPID(S))\r\nAND m.groupid NOT IN (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - Hyper-V Replication Status')\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"An example of a query with a groupid:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"INSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n'0' as `SearchID`,\r\n'ProVal - Production - Hyper-V Replication Status' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'Hyper-V Replication Failed on %CLIENTNAME%//%COMPUTERNAME%~~~The issue with the Hyper-V Replication is resolved.!!!Hyper-V Replication Failed on %CLIENTNAME%//%COMPUTERNAME%~~~Replication state of each problematic VM is outlined below:\\n\\n%RESULT%\\n\\nIt indicates that there is an issue with the replication process or with the replication target. Here are some basic troubleshooting steps that can help to address these issues:\\n\\n1. Check the replication settings: Ensure that the replication settings are configured correctly and that they are enabled for the virtual machine. Also, check that the replication target is configured correctly and is accessible.\\n\\n2. Check the replication network: Ensure that the replication network is functioning properly and that there are no issues with connectivity or bandwidth. Verify that firewalls and other security measures are not blocking replication traffic.\\n\\n3. Check the health of the virtual machine: Check the health of the virtual machine to ensure that it is not experiencing any issues that could affect replication. This includes checking for storage or network issues, as well as any errors or warnings in the virtual machine logs.\\n\\n4. Check the replication logs: Review the replication logs to identify any errors or warnings that could be causing the replication state to show as \"Critical\" or \"Warning\". This can help to pinpoint the source of the issue and guide further troubleshooting steps.\\n\\n5. Restart the replication process: Try restarting the replication process to see if this resolves the issue. This can be done by stopping and starting the replication services or by disabling and re-enabling replication for the virtual machine.' as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'3600' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C://Windows//System32//WindowsPowerShell//v1.0//powershell.exe -ExecutionPolicy Bypass -Command \"$ErroractionPreference= /\\'SilentlyContinue/\\'; Get-VMReplication | Where-Object {($_.health -like /\\'Critical/\\') -or ($_.health -like /\\'Warning/\\')} | Foreach-Object {Write-Output ////\\\"$($_.name) replication state: $($_.health)////\\\"}\"' as `DataOut`,\r\n'9' as `Comparor`,\r\n'replication state:' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'16' as `Category`,\r\n'0' as `TicketCategory`,\r\n'0' as `ScriptTarget`,\r\nCONCAT(\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\n'-',\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1),\r\nSUBSTRING('abcdef0123456789', FLOOR(RAND()*16+1), 1)\r\n) as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (1766)\r\nAND m.groupid NOT IN (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - Hyper-V Replication Status')\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Locate your remote monitor by opening the group(s) remote monitors tab, then apply the appropriate alert template."}),"\n"]}),"\n"]})]})}function R(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var r=n(296540);const a={},i=r.createContext(a);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);