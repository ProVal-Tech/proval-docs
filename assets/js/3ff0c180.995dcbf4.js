"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[47890],{287181:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cwa/scripts/f63c0791-3057-4e90-888e-ae6f2ada558a","title":"Email Creation - Computer","description":"This document outlines an email notification script designed for use with monitoring templates. It details how the script sends emails based on specific alert templates and includes important notes on compatibility with different monitor types. The document also provides a comprehensive overview of the variables and global parameters utilized in the script.","source":"@site/docs/cwa/scripts/Email Creation - Computer.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/f63c0791-3057-4e90-888e-ae6f2ada558a","permalink":"/docs/cwa/scripts/f63c0791-3057-4e90-888e-ae6f2ada558a","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Email Creation - Computer.md","tags":[{"inline":false,"label":"Email","permalink":"/docs/tags/email","description":"Documents about email systems and their management"},{"inline":false,"label":"SQL","permalink":"/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"}],"version":"current","frontMatter":{"id":"f63c0791-3057-4e90-888e-ae6f2ada558a","title":"Email Creation - Computer","title_meta":"Email Creation - Computer","keywords":["email","monitor","alerts","notification","sql"],"description":"This document outlines an email notification script designed for use with monitoring templates. It details how the script sends emails based on specific alert templates and includes important notes on compatibility with different monitor types. The document also provides a comprehensive overview of the variables and global parameters utilized in the script.","tags":["email","sql"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Email Creation - Computer LTRunByUser","permalink":"/docs/cwa/scripts/aff3413b-574f-4399-8f4b-85e04d388c5a"},"next":{"title":"Email Creation - Ping Monitor","permalink":"/docs/cwa/scripts/2750b9e3-6916-4dbc-85a8-2c840d636b32"}}');var r=i(474848),n=i(28453);const o={id:"f63c0791-3057-4e90-888e-ae6f2ada558a",title:"Email Creation - Computer",title_meta:"Email Creation - Computer",keywords:["email","monitor","alerts","notification","sql"],description:"This document outlines an email notification script designed for use with monitoring templates. It details how the script sends emails based on specific alert templates and includes important notes on compatibility with different monitor types. The document also provides a comprehensive overview of the variables and global parameters utilized in the script.",tags:["email","sql"],draft:!1,unlisted:!1},a=void 0,l={},d=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Important Notes on Using This with Monitors",id:"important-notes-on-using-this-with-monitors",level:2},{value:"Variables",id:"variables",level:2},{value:"Global Parameters",id:"global-parameters",level:4},{value:"Output",id:"output",level:2}];function c(e){const t={a:"a",br:"br",code:"code",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(t.p,{children:["This script functions similarly to the ",(0,r.jsx)(t.a,{href:"/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"CWM - Automate - Script - Ticket Creation - Computer"})," script; however, instead of creating a ticket, it is designed to send an email to the email address provided in the system property."]}),"\n",(0,r.jsx)(t.p,{children:"This script sends emails to two different addresses:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["If the script is called by the alert template \u201c",(0,r.jsx)(t.strong,{children:"\u25b3 Custom - Email RAWSQL Monitor set results to ProVal"}),",\u201d it will send an email to the address set in the system property \u201cProVal_Alerts_Email_Address,\u201d which is typically set to \u201c",(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"}),".\u201d",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.strong,{children:"Note:"})," If the property is missing, the script will automatically set it to \u201c",(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"}),",\u201d but if it is set to a different email address, it will not be modified."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"If the script is called by any other template, it will fetch the email address from the system property \u201c_sysTicketDefaultEmail.\u201d"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,r.jsx)(t.p,{children:"This script should be utilized as an autofix for a monitor."}),"\n",(0,r.jsx)(t.h2,{id:"important-notes-on-using-this-with-monitors",children:"Important Notes on Using This with Monitors"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Monitors can be tricky with this; in most cases, remote monitors will work fine. However, in some cases, internal monitors may not be compatible with this solution. This can be due to the utilization of ",(0,r.jsx)(t.code,{children:"set @something ="})," in the monitor. You should avoid this in your internal RAWSQL monitors if the result is going to be used with this solution."]}),"\n",(0,r.jsxs)(t.li,{children:["If you can place your SQL inside a select statement in parentheses and it works, you should be fine (tcomps are adjusted for).","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For instance, if ",(0,r.jsx)(t.code,{children:"select youridentityfield from ( [your select statement] ) s Where your select computerid is equal to the computer id for the script"})," works, then this solution should work for you."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,r.jsx)(t.p,{children:"Document the various variables in the script. Delete any section that is not relevant to your script."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"VarLog"}),(0,r.jsx)(t.td,{children:"A running variable holding the logged results."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"BiosName"}),(0,r.jsx)(t.td,{children:"Used when the monitor calls this script to set up the email body."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"BiosVer"}),(0,r.jsx)(t.td,{children:"Used when the monitor calls this script to set up the email body."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Name"}),(0,r.jsx)(t.td,{children:"The name of the monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MonitorType"}),(0,r.jsx)(t.td,{children:"Used to determine remote vs internal monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RAWSQL"}),(0,r.jsx)(t.td,{children:"Used to recreate the monitor results to ensure overflowed variables are not present from the monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"DataOut"}),(0,r.jsx)(t.td,{children:"Used to recreate the monitor results to ensure overflowed variables are not present from the monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FieldName"}),(0,r.jsx)(t.td,{children:"The field name from the monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Result"}),(0,r.jsx)(t.td,{children:"The result from the monitor."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"SuccessMSG"}),(0,r.jsx)(t.td,{children:"Self-explanatory."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FailedMSG"}),(0,r.jsx)(t.td,{children:"Self-explanatory."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"EmailCreateBody"}),(0,r.jsx)(t.td,{children:"The formatted body for the email creation."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Tcomp"}),(0,r.jsx)(t.td,{children:"Used to remove the tcomp line from the query."})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"global-parameters",children:"Global Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"EmailOnSuccess"}),(0,r.jsx)(t.td,{children:"0 or 1"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"0 disables emailing a success email. 1 enables emailing a success email."})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Email"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var s=i(296540);const r={},n=s.createContext(r);function o(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);