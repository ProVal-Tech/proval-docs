"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[185],{3686:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"powershell/ps-initialize-bitlockervolume","title":"Initialize-BitLockerVolume","description":"Documentation for the Initialize-BitLockerVolume command to encrypt a drive with BitLocker disk encryption.","source":"@site/docs/powershell/Initialize-BitLockerVolume.md","sourceDirName":"powershell","slug":"/powershell/ps-initialize-bitlockervolume","permalink":"/docs/powershell/ps-initialize-bitlockervolume","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/docs/tree/main/packages/create-docusaurus/templates/shared/docs/powershell/Initialize-BitLockerVolume.md","tags":[{"inline":false,"label":"Disk Encryption","permalink":"/docs/tags/disk-encryption","description":"Content related to disk encryption."},{"inline":false,"label":"Security","permalink":"/docs/tags/security","description":"Content related to security."},{"inline":false,"label":"Windows","permalink":"/docs/tags/windows","description":"Content related to the Windows operating system."}],"version":"current","frontMatter":{"id":"ps-initialize-bitlockervolume","title":"Initialize-BitLockerVolume","title_meta":"Initialize-BitLockerVolume Command","keywords":["initialize","bitlocker","volume","encryption"],"description":"Documentation for the Initialize-BitLockerVolume command to encrypt a drive with BitLocker disk encryption.","tags":["disk-encryption","security","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Import-Log4JTable","permalink":"/docs/powershell/ps-import-log4jtable"},"next":{"title":"Install-AutomateAgentGPO","permalink":"/docs/powershell/ps-install-automateagentgpo"}}');var s=r(4848),n=r(8453);const d={id:"ps-initialize-bitlockervolume",title:"Initialize-BitLockerVolume",title_meta:"Initialize-BitLockerVolume Command",keywords:["initialize","bitlocker","volume","encryption"],description:"Documentation for the Initialize-BitLockerVolume command to encrypt a drive with BitLocker disk encryption.",tags:["disk-encryption","security","windows"],draft:!1,unlisted:!1},o=void 0,c={},l=[{value:"Description",id:"description",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Usage",id:"usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Output",id:"output",level:2}];function h(e){const t={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(t.p,{children:"Encrypts a drive with Bitlocker disk encryption."}),"\n",(0,s.jsx)(t.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(t.p,{children:"PowerShell v5"}),"\n",(0,s.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(t.p,{children:"The script takes multiple switches which determines the type of encryption that will be implemented. The script will first validate the following items:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:'If the protection status of the drive is currently "On" then the script will print the current status and encryption percentage and exit.'}),"\n",(0,s.jsx)(t.li,{children:"If the Bitlocker volume is currently suspended, then protection will be resumed."}),"\n",(0,s.jsx)(t.li,{children:"If the Bitlocker volume currently has an encryption or decryption process running against it, then it will exit and prompt the operator to re-run the script after the process finishes."}),"\n",(0,s.jsx)(t.li,{children:"If all of the above checks pass and there is still a key protector (or multiple key protectors) installed then it/they will be removed."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The script will then check for an existing TPM chip."}),"\n",(0,s.jsxs)(t.p,{children:["If a TPM chip exists, then the script will validate that the chip is initialized. If ",(0,s.jsx)(t.code,{children:"-AllowTPMInit"})," is passed, the chip will be initialized if it is not already. If ",(0,s.jsx)(t.code,{children:"-AllowRestart"})," was passed, then the computer will be shut down or rebooted based on the requirements of the TPM initialization."]}),"\n",(0,s.jsxs)(t.p,{children:["If a TPM chip is not found and ",(0,s.jsx)(t.code,{children:"-TpmProtector"}),", ",(0,s.jsx)(t.code,{children:"-TpmAndPinProtector"}),", ",(0,s.jsx)(t.code,{children:"-TpmAndStartupKeyProtector"}),", or ",(0,s.jsx)(t.code,{children:"-TpmAndPinAndStartupKeyProtector"})," were passed, then the script will exit on error."]}),"\n",(0,s.jsx)(t.p,{children:"Otherwise, if a TPM chip is not found, the script will continue. The drive will be encrypted based on the passed switches."}),"\n",(0,s.jsx)(t.p,{children:"If a recovery password was installed, then an attempt to back it up the AD will be made."}),"\n",(0,s.jsxs)(t.p,{children:["If ",(0,s.jsx)(t.code,{children:"-AllowRestart"})," was passed, then the computer will be rebooted to complete the encryption process if ",(0,s.jsx)(t.code,{children:"-SkipHardwareTest"})," was not passed."]}),"\n",(0,s.jsx)(t.p,{children:"Encrypts the E: volume with a password protector using Aes128. Will initialize TPM if needed and reboot the computer after completion."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-powershell",children:".\\Initialize-BitLockerVolume.ps1 -MountPoint E: -EncryptionMethod Aes128 -PasswordProtector -Password (ConvertTo-SecureString -String 'P@$sw0rD!' -AsPlainText -Force) -AllowTPMInit -AllowRestart\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Encrypts the $env",":SystemDrive"," volume with a Tpm protector using Aes256. if TPM is not initialized, the script will exit. Will reboot the computer after completion."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-powershell",children:".\\Initialize-BitLockerVolume.ps1 -Tpm -AllowRestart\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Encrypts the $env",":SystemDrive"," volume with a Startup key protector using Aes256 to E:\\Recovery. Will initialize TPM if needed. Will reboot the computer after completion."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-powershell",children:".\\Initialize-BitLockerVolume.ps1 -StartupKeyProtector -Path E:\\Recovery -AllowTPMInit -AllowRestart\n"})}),"\n",(0,s.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Parameter"}),(0,s.jsx)(t.th,{children:"Required"}),(0,s.jsx)(t.th,{children:"Default"}),(0,s.jsx)(t.th,{children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"MountPoint"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"$env:SystemDrive"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsxs)(t.td,{children:["The target volume to enable Bitlocker encryption against. Should be in the format '<driveletter>' or '<driveletter>:'. If a path is passed, the drive of that path will attempted to be parsed. Defaults to ",(0,s.jsx)(t.code,{children:"$env:SystemDrive"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"EncryptionMethod"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:'"Aes256"'}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"The method of encryption to use for Bitlocker. Valid options are Aes128, Aes256, XtsAes128, or XtsAes256. Defaults to Aes256."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"AllowTPMInit"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Allow the script to attempt initilization of TPM is necessary. Will require a reboot if TPM needs to be initilized."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"AllowRestart"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Allow the script to automatically restart or shutdown the machine. This can happen on initilization of TPM or successful encryption of a volume."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"TpmProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with only the TPM chip."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"TpmAndPinProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with the TPM chip and a PIN. Requires the -Pin parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"TpmAndStartupKeyProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with the TPM chip and a startup key. Requires the -Path parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"TpmAndPinAndStartupKeyProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with the TPM chip, a PIN, and a startup key. Requires the -Pin and -Path parameters to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"PasswordProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protects the encrypted drive with a custom password. Requires the -Password parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"StartupKeyProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with a startup key. Requires the -Path parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"RecoveryKeyProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with a recovery key. Requires the -Path parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"RecoveryPasswordProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with a recovery password. If the -RecoveryPassword parameter is not passed, then the script will generate one automatically."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"AdAccountOrGroupProtector"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Protect the encrypted drive with an Active Directory Account or Group. Requires the -AdAccountOrGroup parameter to be passed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Pin"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"SecureString"}),(0,s.jsx)(t.td,{children:"The PIN to use in conjunction with TPM to protect the encrypted drive."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Path"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"The path to the external drive to save the startup or recovery key to."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"Password"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"SecureString"}),(0,s.jsx)(t.td,{children:"The password to set on the encrypted drive."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"RecoveryPassword"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"The recovery password to set on the encrypted drive. Must be in the following format: 000000-000000-000000-000000-000000-000000-000000-000000"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"AdAccountOrGroup"})}),(0,s.jsx)(t.td,{children:"True"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"The Active Directory Account or Group to protect the encrypted drive with."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"SkipHardwareTest"})}),(0,s.jsx)(t.td,{children:"False"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"Switch"}),(0,s.jsx)(t.td,{children:"Use this switch to skip the hardware test for Bitlocker, removing the need for a reboot of the system before encryption."})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,s.jsx)(t.p,{children:".\\Initialize-BitLockerVolume-log.txt\r\n.\\Initialize-BitLockerVolume-data.txt\r\n.\\Initialize-BitLockerVolume-error.txt"})]})}function a(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>d,x:()=>o});var i=r(6540);const s={},n=i.createContext(s);function d(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);