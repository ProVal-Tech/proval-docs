"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[6187],{189005:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"cwa/monitors/41b393a9-cb59-4418-8536-9fe911cb4c9d","title":"Monitor~~ Autofix - Run Queued Scripts","description":"This document outlines the configuration and functionality of a monitor created by the CWM - Automate - Script - Queue Script. It details how the monitor checks the online status of computers and sends alerts based on their last contact time, along with dependencies and SQL translation for the monitor.","source":"@site/docs/cwa/monitors/Monitor~~ Autofix - Run Queued Scripts.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/41b393a9-cb59-4418-8536-9fe911cb4c9d","permalink":"/proval-docs/docs/cwa/monitors/41b393a9-cb59-4418-8536-9fe911cb4c9d","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Monitor~~ Autofix - Run Queued Scripts.md","tags":[{"inline":false,"label":"Database","permalink":"/proval-docs/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Performance","permalink":"/proval-docs/docs/tags/performance","description":"Documents related to enhancing system and application performance"}],"version":"current","frontMatter":{"id":"41b393a9-cb59-4418-8536-9fe911cb4c9d","title":"Monitor~~ Autofix - Run Queued Scripts","title_meta":"Monitor~~ Autofix - Run Queued Scripts","keywords":["monitor","queued","scripts","computers","alert"],"description":"This document outlines the configuration and functionality of a monitor created by the CWM - Automate - Script - Queue Script. It details how the monitor checks the online status of computers and sends alerts based on their last contact time, along with dependencies and SQL translation for the monitor.","tags":["database","performance"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Monitor OS Build","permalink":"/proval-docs/docs/cwa/monitors/4855070e-17d1-4caa-9ded-793fef9b330d"},"next":{"title":"Multiple Antivirus","permalink":"/proval-docs/docs/cwa/monitors/6b8a4b4e-4df8-4f97-af11-ee8702e8ccbd"}}');var s=n(474848),o=n(28453);const i={id:"41b393a9-cb59-4418-8536-9fe911cb4c9d",title:"Monitor~~ Autofix - Run Queued Scripts",title_meta:"Monitor~~ Autofix - Run Queued Scripts",keywords:["monitor","queued","scripts","computers","alert"],description:"This document outlines the configuration and functionality of a monitor created by the CWM - Automate - Script - Queue Script. It details how the monitor checks the online status of computers and sends alerts based on their last contact time, along with dependencies and SQL translation for the monitor.",tags:["database","performance"],draft:!1,unlisted:!1},a=void 0,c={},l=[{value:"Summary",id:"summary",level:2},{value:"Internal Monitor Settings",id:"internal-monitor-settings",level:3},{value:"Group Level Configuration",id:"group-level-configuration",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Target",id:"target",level:2},{value:"Translated SQL",id:"translated-sql",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(t.p,{children:["This monitor is created by the ",(0,s.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/c96624e1-038a-45ca-a6d0-645a629af721",children:"CWM - Automate - Script - Queue Script"})," automate script. It returns a failure if the computer is offline and success when online."]}),"\n",(0,s.jsx)(t.h3,{id:"internal-monitor-settings",children:"Internal Monitor Settings"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Interval:"})," 5 minutes"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Mode:"})," Send fail after success"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Table:"})," Computers"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Field:"})," LastContact"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Condition:"})," Less than"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Result:"})," (NOW() - Interval 5 Minutes)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Identity:"})," Computers.Name"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Target Groups:"})," Machines with Queued Scripts"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"group-level-configuration",children:"Group Level Configuration"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Alert Template:"})," ~Autofix - Run Queued Scripts"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"State:"})," Enabled"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/f60f4501-a2ea-43f0-87ee-99fc8ee15031",children:"CWM - Automate - Script - Run Queued Scripts"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/c96624e1-038a-45ca-a6d0-645a629af721",children:"CWM - Automate - Script - Queue Script"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/proval-docs/docs/solutions/2910ca09-a0c7-4b44-8ea4-ef6e71304df8",children:"CWM - Automate - Solution - Queue Script Next Checkin"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/proval-docs/docs/cwa/tables/a20befa8-ecca-4cf9-9d18-c4140f87aafc",children:"CWM - Automate - Custom Table - plugin_proval_queued_scripts"})}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"target",children:"Target"}),"\n",(0,s.jsx)(t.p,{children:"The suggested target for the monitor will be partially generalized, as group names can vary between Automate systems. Examples:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"'Machines With Queued Scripts' Group only"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"translated-sql",children:"Translated SQL"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sql",children:"SELECT \r\n  DISTINCT 'C', \r\n  computers.computerid, \r\n  computers.Name AS ComputerName, \r\n  CONVERT(\r\n    CONCAT(\r\n      clients.name, ' ', locations.name\r\n    ) USING utf8\r\n  ) AS Location, \r\n  computers.`LastContact` AS TestValue, \r\n  Computers.Name \r\nFROM \r\n  ( \r\n    computers \r\n    LEFT JOIN Locations ON Locations.LocationID = computers.Locationid\r\n  ) \r\n  LEFT JOIN Clients ON Clients.ClientID = Computers.clientid \r\n  JOIN AgentComputerData ON Computers.ComputerID = AgentComputerData.ComputerID \r\nWHERE \r\n  computers.`LastContact` < (NOW() - INTERVAL 5 MINUTE) \r\n  AND Computers.ComputerID IN (\r\n    SELECT \r\n      DISTINCT ComputerID \r\n    FROM \r\n      Tcomp\r\n  )\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(296540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);