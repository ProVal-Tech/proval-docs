"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[6834],{233455:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"cwa/monitors/3a5d036a-dcc5-4e6e-9962-92309891a4ec","title":"Import - Remote Monitor - Disable AI Recall","description":"This document provides detailed steps to set up a remote monitor for Windows 11 machines using SQL queries. It includes obtaining group IDs, executing SQL commands, and applying alert templates for effective monitoring.","source":"@site/docs/cwa/monitors/Import - Remote Monitor - Disable AI Recall.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/3a5d036a-dcc5-4e6e-9962-92309891a4ec","permalink":"/docs/cwa/monitors/3a5d036a-dcc5-4e6e-9962-92309891a4ec","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Import - Remote Monitor - Disable AI Recall.md","tags":[{"inline":false,"label":"Setup","permalink":"/docs/tags/setup","description":"Documents on setting up software and hardware configurations"},{"inline":false,"label":"SQL","permalink":"/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"},{"inline":false,"label":"Windows","permalink":"/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"3a5d036a-dcc5-4e6e-9962-92309891a4ec","title":"Import - Remote Monitor - Disable AI Recall","title_meta":"Import - Remote Monitor - Disable AI Recall","keywords":["setup","monitor","sql","remote","windows","groupid","alert"],"description":"This document provides detailed steps to set up a remote monitor for Windows 11 machines using SQL queries. It includes obtaining group IDs, executing SQL commands, and applying alert templates for effective monitoring.","tags":["setup","sql","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Import - Remote Monitor - AD Account LockOut Detection","permalink":"/docs/cwa/monitors/de574ff4-5a24-4ccd-83d3-499b1b274893"},"next":{"title":"Import - Remote Monitor - Hyper-V Replication Status","permalink":"/docs/cwa/monitors/f201b6f8-2844-484b-b3f8-79e1fd76e819"}}');var a=o(474848),n=o(28453);const s={id:"3a5d036a-dcc5-4e6e-9962-92309891a4ec",title:"Import - Remote Monitor - Disable AI Recall",title_meta:"Import - Remote Monitor - Disable AI Recall",keywords:["setup","monitor","sql","remote","windows","groupid","alert"],description:"This document provides detailed steps to set up a remote monitor for Windows 11 machines using SQL queries. It includes obtaining group IDs, executing SQL commands, and applying alert templates for effective monitoring.",tags:["setup","sql","windows"],draft:!1,unlisted:!1},i=void 0,l={},c=[{value:"Steps to Set Up Remote Monitor",id:"steps-to-set-up-remote-monitor",level:2},{value:"1. Obtain Group IDs",id:"1-obtain-group-ids",level:3},{value:"2. Execute SQL Query",id:"2-execute-sql-query",level:3},{value:"3. Create and Setup Remote Monitor",id:"3-create-and-setup-remote-monitor",level:3},{value:"4. Example of Monitor Query",id:"4-example-of-monitor-query",level:3},{value:"5. Execute Your Query",id:"5-execute-your-query",level:3},{value:"6. Locate Your Remote Monitor",id:"6-locate-your-remote-monitor",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"steps-to-set-up-remote-monitor",children:"Steps to Set Up Remote Monitor"}),"\n",(0,a.jsx)(t.h3,{id:"1-obtain-group-ids",children:"1. Obtain Group IDs"}),"\n",(0,a.jsx)(t.p,{children:"Obtain the group ID(s) of the group(s) that the remote monitor should be applied to."}),"\n",(0,a.jsx)(t.h3,{id:"2-execute-sql-query",children:"2. Execute SQL Query"}),"\n",(0,a.jsx)(t.p,{children:"Run the following SQL query from a RAWSQL monitor set to import the required search:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"INSERT INTO `sensorchecks`\r\nSELECT\r\n'' AS `SensID`,\r\n'Windows 11 Machines' AS `Name`,\r\n'SELECT \\r\\n   computers.computerid as `Computer Id`,\\r\\n   computers.name as `Computer Name`,\\r\\n   clients.name as `Client Name`,\\r\\n   computers.domain as `Computer Domain`,\\r\\n   computers.username as `Computer User`,\\r\\n   inv_operatingsystem.name as `Computer.OS.Name`\\r\\nFROM Computers \\r\\nLEFT JOIN inv_operatingsystem ON (Computers.ComputerId=inv_operatingsystem.ComputerId)\\r\\nLEFT JOIN Clients ON (Computers.ClientId=Clients.ClientId)\\r\\nLEFT JOIN Locations ON (Computers.LocationId=Locations.LocationID)\\r\\n WHERE \\r\\n((inv_operatingsystem.name like \\'%windows 11%\\'))\\r\\n' AS `SQL`,\r\n'4' AS `QueryType`,\r\n'Select||=||=||=|^Select|||||||^' AS `ListData`,\r\n'0' AS `FolderID`,\r\n'e092aede-3e39-11ef-85af-8600008a66b7' AS `GUID`,\r\n'<LabTechAbstractSearch><asn><st>AndNode</st><cn><asn><st>ComparisonNode</st><lon>Computer.OS.Name</lon><lok>Computer.OS.Name</lok><lmo>TextLike</lmo><dv>%windows 11%</dv><dk>%windows 11%</dk></asn></cn></asn></LabTechAbstractSearch>' AS `SearchXML`,\r\n'' AS `UpdatedBy`,\r\n'' AS `UpdateDate`\r\nFROM (SELECT MIN(computerid) FROM computers) a\r\nWHERE (SELECT COUNT(*) FROM SensorChecks WHERE `GUID` = 'e092aede-3e39-11ef-85af-8600008a66b7') = 0;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"3-create-and-setup-remote-monitor",children:"3. Create and Setup Remote Monitor"}),"\n",(0,a.jsxs)(t.p,{children:["Copy the following query and replace ",(0,a.jsx)(t.strong,{children:"YOUR COMMA SEPARATED LIST OF GROUPID(S)"})," with the group ID(s) of the relevant groups to create and set up the remote monitor. (The string to replace can be found at the very bottom of the query, right after ",(0,a.jsx)(t.strong,{children:"WHERE"}),")"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"SET @searchID = ( SELECT MAX(sensid) FROM sensorchecks WHERE `GUID` ='e092aede-3e39-11ef-85af-8600008a66b7' )\r\n\r\nINSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n@SearchID as `SearchID`,\r\n'ProVal - Production - Disable AI Recall' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'Failed to Disable AI Recall on %COMPUTERNAME%~~~AI Recall is successfully Disabled!!!Failed to Disable AI Recall on %COMPUTERNAME%~~~Failed to Disable AI Recall on %COMPUTERNAME% on %CLIENTNAME%\\\\%COMPUTERNAME% at %LOCATIONNAME%', as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'1800' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C:\\\\Windows\\\\system32\\\\cmd.exe /c powershell.exe -ExecutionPolicy Bypass -Command \"$paths = @(\\'HKCU:\\\\Software\\\\Policies\\\\Microsoft\\\\Windows\\\\WindowsAI\\',\\'HKLM:\\\\SOFTWARE\\\\Policies\\\\Microsoft\\\\Windows\\\\WindowsAI\\');$name = \\'DisableAIDataAnalysis\\';$value = 1;foreach ($path in $paths) {try {if (-Not (Test-Path $path)) {New-Item -Path $path -Force | out-null  }Set-ItemProperty -Path $path -Name $name -Value $value -Type DWord  | out-null }catch{Write-Output \\'Failed to set $name at $path\\'}}\"' as `DataOut`,\r\n'16' as `Comparor`,\r\n'10|^(()%7C %7C(OK)%7C(\\\\r\\\\n))$|11|^(()%7C %7C(OK)%7C(\\\\r\\\\n))$%7CFailed to set|10|Failed to set' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'21' as `Category`,\r\n'0' as `TicketCategory`,\r\n'1' as `ScriptTarget`,\r\nUUID() as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (YOUR COMMA SEPARATED LIST OF GROUPID(S))\r\nAND m.groupid NOT IN  (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - Disable AI Recall')\n"})}),"\n",(0,a.jsx)(t.h3,{id:"4-example-of-monitor-query",children:"4. Example of Monitor Query"}),"\n",(0,a.jsx)(t.p,{children:"Here is an example of a monitor query with a group ID:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"SET @searchID = ( SELECT MAX(sensid) FROM sensorchecks WHERE `GUID` ='e092aede-3e39-11ef-85af-8600008a66b7' )\r\n\r\nINSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n@SearchID as `SearchID`,\r\n'ProVal - Production - Disable AI Recall' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'Failed to Disable AI Recall on %COMPUTERNAME%~~~AI Recall is successfully Disabled!!!Failed to Disable AI Recall on %COMPUTERNAME%~~~Failed to Disable AI Recall on %COMPUTERNAME% on %CLIENTNAME%\\\\%COMPUTERNAME% at %LOCATIONNAME%', as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'1800' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C:\\\\Windows\\\\system32\\\\cmd.exe /c powershell.exe -ExecutionPolicy Bypass -Command \"$paths = @(\\'HKCU:\\\\Software\\\\Policies\\\\Microsoft\\\\Windows\\\\WindowsAI\\',\\'HKLM:\\\\SOFTWARE\\\\Policies\\\\Microsoft\\\\Windows\\\\WindowsAI\\');$name = \\'DisableAIDataAnalysis\\';$value = 1;foreach ($path in $paths) {try {if (-Not (Test-Path $path)) {New-Item -Path $path -Force | out-null  }Set-ItemProperty -Path $path -Name $name -Value $value -Type DWord  | out-null }catch{Write-Output \\'Failed to set $name at $path\\'}}\"' as `DataOut`,\r\n'16' as `Comparor`,\r\n'10|^(()%7C %7C(OK)%7C(\\\\r\\\\n))$|11|^(()%7C %7C(OK)%7C(\\\\r\\\\n))$%7CFailed to set|10|Failed to set' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'21' as `Category`,\r\n'0' as `TicketCategory`,\r\n'1' as `ScriptTarget`,\r\nUUID() as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (234,768)\r\nAND m.groupid NOT IN  (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - Disable AI Recall')\n"})}),"\n",(0,a.jsx)(t.h3,{id:"5-execute-your-query",children:"5. Execute Your Query"}),"\n",(0,a.jsx)(t.p,{children:"Now execute your query from a RAWSQL monitor set."}),"\n",(0,a.jsx)(t.h3,{id:"6-locate-your-remote-monitor",children:"6. Locate Your Remote Monitor"}),"\n",(0,a.jsx)(t.p,{children:"Locate your remote monitor by opening the group(s) remote monitors tab, then apply the appropriate alert template."})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>i});var r=o(296540);const a={},n=r.createContext(a);function s(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);