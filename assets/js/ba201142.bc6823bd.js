"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[24354],{269186:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"cwa/scripts/05f60b47-188b-4383-9e9c-98780ba6e488","title":"Repair Failing Patch Scans","description":"This document outlines the Autofix script designed for monitoring patch statuses. It details the script function, dependencies, process steps, and how to run it manually. The script checks the status of patch scans and attempts to resolve issues by resending patches and managing service states.","source":"@site/docs/cwa/scripts/Repair Failing Patch Scans.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/05f60b47-188b-4383-9e9c-98780ba6e488","permalink":"/proval-docs/docs/cwa/scripts/05f60b47-188b-4383-9e9c-98780ba6e488","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Repair Failing Patch Scans.md","tags":[],"version":"current","frontMatter":{"id":"05f60b47-188b-4383-9e9c-98780ba6e488","title":"Repair Failing Patch Scans","title_meta":"Repair Failing Patch Scans","keywords":["autofix","monitor","patch","scan","service"],"description":"This document outlines the Autofix script designed for monitoring patch statuses. It details the script function, dependencies, process steps, and how to run it manually. The script checks the status of patch scans and attempts to resolve issues by resending patches and managing service states.","tags":[],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Remove-Environmental Path Variable","permalink":"/proval-docs/docs/cwa/scripts/6d78f2c5-5a2d-4806-8d48-ac821935f681"},"next":{"title":"Repair Huntress Agent Windows","permalink":"/proval-docs/docs/cwa/scripts/6489855d-0391-444d-a207-dfbd76152948"}}');var n=s(474848),a=s(28453);const c={id:"05f60b47-188b-4383-9e9c-98780ba6e488",title:"Repair Failing Patch Scans",title_meta:"Repair Failing Patch Scans",keywords:["autofix","monitor","patch","scan","service"],description:"This document outlines the Autofix script designed for monitoring patch statuses. It details the script function, dependencies, process steps, and how to run it manually. The script checks the status of patch scans and attempts to resolve issues by resending patches and managing service states.",tags:[],draft:!1,unlisted:!1},r=void 0,o={},l=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Variables",id:"variables",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsxs)(t.p,{children:["This script is an Autofix script meant to be called from the monitor ",(0,n.jsx)(t.a,{href:"/proval-docs/docs/cwa/monitors/43acf895-0eee-4e39-ac9d-cabc5f23e9a1",children:"ProVal - Development - Last scanned patch date > 7 days"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,n.jsx)(t.p,{children:"This script was designed to be called from a monitor."}),"\n",(0,n.jsx)(t.p,{children:"To run this script manually, please see the screenshots below."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Screenshot",src:s(495217).A+"",width:"481",height:"319"})}),"\n",(0,n.jsx)(t.p,{children:"In the Advanced Settings \u2192 Parameters area, please enter the following string of text:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"@status@=FAILED\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Screenshot",src:s(835322).A+"",width:"480",height:"317"})}),"\n",(0,n.jsx)(t.p,{children:"This will allow the script to be run manually instead of being called by the monitor."}),"\n",(0,n.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,n.jsxs)(t.p,{children:["This Autofix script is called by the monitor ",(0,n.jsx)(t.a,{href:"/proval-docs/docs/cwa/monitors/43acf895-0eee-4e39-ac9d-cabc5f23e9a1",children:"ProVal - Development - Last scanned patch date > 7 days"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"%lastcmdoutput%"})," - This variable is used to review the data returned from the Resend Patch information commands."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"The script will first verify the status of the monitor (or the parameter used to run manually mentioned above) and, if the patch scan was successful, will simply exit the script."}),"\n",(0,n.jsx)(t.li,{children:"If the monitor is still in a failed state, the monitor will attempt to resend patches."}),"\n",(0,n.jsx)(t.li,{children:"If the patch scan returns properly, the script will exit with a log message indicating the issue has been resolved."}),"\n",(0,n.jsxs)(t.li,{children:["If the patch scan fails again, the script will take the following actions:","\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:'Set the WUAUSERV to "AutoStart."'}),"\n",(0,n.jsx)(t.li,{children:"Start the WUAUSERV service."}),"\n",(0,n.jsx)(t.li,{children:"Attempt to scan for patches again."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"The script will then verify if the patch scan is working properly. If the command completes successfully, the script will exit. If the command fails, the script will exit with an error."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Script log messages only."}),"\n",(0,n.jsxs)(t.li,{children:["Please reach out to ",(0,n.jsx)(t.a,{href:"mailto:support@provaltech.com",children:"support@provaltech.com"})," if you would like this solution to begin ticketing."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},495217:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/image_1-4314c2bae694edfc6af524f11c7f7190.png"},835322:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/image_2-5eb76496ff55eba7aff836ccce7578d2.png"},28453:(e,t,s)=>{s.d(t,{R:()=>c,x:()=>r});var i=s(296540);const n={},a=i.createContext(n);function c(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);