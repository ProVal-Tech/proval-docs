"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[27941],{753357:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cwa/scripts/730449e6-1c73-46ca-a93d-d7b9526e1ef9","title":"Ticket Creation - Without Computer Information And Failures Only Autofix","description":"This document describes a script that creates tickets without including computer details, functioning similarly to the CWM Automate script for ticket creation. It outlines the variables used, the process for ticket creation, and the expected output, focusing on RAWSQL monitor sets and internal monitors.","source":"@site/docs/cwa/scripts/Ticket Creation - Without Computer Information And Failures Only Autofix.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/730449e6-1c73-46ca-a93d-d7b9526e1ef9","permalink":"/proval-docs/docs/cwa/scripts/730449e6-1c73-46ca-a93d-d7b9526e1ef9","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Ticket Creation - Without Computer Information And Failures Only Autofix.md","tags":[{"inline":false,"label":"SQL","permalink":"/proval-docs/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"}],"version":"current","frontMatter":{"id":"730449e6-1c73-46ca-a93d-d7b9526e1ef9","title":"Ticket Creation - Without Computer Information And Failures Only Autofix","title_meta":"Ticket Creation - Without Computer Information And Failures Only Autofix","keywords":["ticket","creation","monitor","alert","sql"],"description":"This document describes a script that creates tickets without including computer details, functioning similarly to the CWM Automate script for ticket creation. It outlines the variables used, the process for ticket creation, and the expected output, focusing on RAWSQL monitor sets and internal monitors.","tags":["sql"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Ticket Creation - VMWare ESXi Monitoring","permalink":"/proval-docs/docs/cwa/scripts/7fbdffc1-7472-4276-914d-1e5b845dcd3c"},"next":{"title":"Ticket Sync Failed","permalink":"/proval-docs/docs/cwa/scripts/f490325a-023c-430d-876d-e4d311ff3e89"}}');var r=i(474848),n=i(28453);const c={id:"730449e6-1c73-46ca-a93d-d7b9526e1ef9",title:"Ticket Creation - Without Computer Information And Failures Only Autofix",title_meta:"Ticket Creation - Without Computer Information And Failures Only Autofix",keywords:["ticket","creation","monitor","alert","sql"],description:"This document describes a script that creates tickets without including computer details, functioning similarly to the CWM Automate script for ticket creation. It outlines the variables used, the process for ticket creation, and the expected output, focusing on RAWSQL monitor sets and internal monitors.",tags:["sql"],draft:!1,unlisted:!1},o=void 0,a={},d=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Variables",id:"variables",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(t.p,{children:["This script operates similarly to the ",(0,r.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"CWM - Automate - Script - Ticket Creation - Computer"})," script; however, instead of creating a ticket with the computer's details, it will create a ticket without including them. Additionally, no actions are defined in the script for the SUCCESS status of the monitors."]}),"\n",(0,r.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,r.jsx)(t.p,{children:"This is an Autofix Script, and it is currently being used with the \u201c~Custom Ticket Creation without Computer Details\u201d alert template."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Sample Run",src:i(797673).A+"",width:"480",height:"356"})}),"\n",(0,r.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitor"}),(0,r.jsx)(t.td,{children:"Name of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RAWSQL"}),(0,r.jsx)(t.td,{children:"To verify whether the script was called by a RAWSQL monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Dataout"}),(0,r.jsx)(t.td,{children:"Monitor set's statement, if it's written as RAWSQL"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FIELDNAME"}),(0,r.jsx)(t.td,{children:"Monitor set's identity field"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Result"}),(0,r.jsx)(t.td,{children:"Monitor set's test value"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketSubject"}),(0,r.jsx)(t.td,{children:"Subject from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"SuccessMSG"}),(0,r.jsx)(t.td,{children:"Success message from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FailedMSG"}),(0,r.jsx)(t.td,{children:"Failure message from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketCreationCategory"}),(0,r.jsx)(t.td,{children:"Ticket category to assign to the ticket"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketCreateSubject"}),(0,r.jsx)(t.td,{children:"Ticket subject"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketCreateBody"}),(0,r.jsx)(t.td,{children:"Failure message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketComment"}),(0,r.jsx)(t.td,{children:"Failure message"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"DataoutLength"}),(0,r.jsxs)(t.td,{children:["Position of the last parentheses in the monitor set's query; this is calculated to remove ",(0,r.jsx)(t.code,{children:"(select computerid from tcomp)"})," from the monitor set's statement. Keeping this statement will lead to the script's failure."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Verifies whether it is a RAWSQL monitor set or a normal internal monitor."}),"\n",(0,r.jsxs)(t.li,{children:["Stores the SQL query used in the monitor set to the ",(0,r.jsx)(t.code,{children:"Dataout"})," variable. It also replaces 'from tcomp' with 'from computers', if it exists in the SQL query. To perform this replacement, it converts the entire query to lowercase."]}),"\n",(0,r.jsxs)(t.li,{children:["Finds the ",(0,r.jsx)(t.code,{children:"FieldName"}),", ",(0,r.jsx)(t.code,{children:"TicketSubject"}),", ",(0,r.jsx)(t.code,{children:"SuccessMSG"}),", and ",(0,r.jsx)(t.code,{children:"FailedMSG"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:['Uses Automate\'s default "_System Automation/Functions/Ticket Comment" script to create a ticket. To call that script, the ',(0,r.jsx)(t.code,{children:"TicketCreateSubject"}),", ",(0,r.jsx)(t.code,{children:"TicketCreateBody"}),", and ",(0,r.jsx)(t.code,{children:"TicketComment"})," variables must be defined and are set with the values of ",(0,r.jsx)(t.code,{children:"TicketSubject"}),", ",(0,r.jsx)(t.code,{children:"FailedMSG"}),", and ",(0,r.jsx)(t.code,{children:"FailedMSG"})," variables, respectively."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"The script will add a comment if an open ticket for the computer with the same subject already exists. Otherwise, it will create one."}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Ticket"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},797673:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/image_1-2784ec1791f0fdccfbc09ca4e521b4c2.png"},28453:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>o});var s=i(296540);const r={},n=s.createContext(r);function c(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(n.Provider,{value:t},e.children)}}}]);