"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[86874],{191697:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"cwa/scripts/7a09c023-231a-4574-a367-ef8009537e23","title":"Update Table Data - UnifiController","description":"This document outlines a script that launches the Get-UnifiController.ps1 file from the registry to filter and populate data into various tables related to the Unifi Controller. It includes sample runs, dependencies, variables, process steps, and output logs.","source":"@site/docs/cwa/scripts/Update Table Data - UnifiController.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/7a09c023-231a-4574-a367-ef8009537e23","permalink":"/docs/cwa/scripts/7a09c023-231a-4574-a367-ef8009537e23","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Update Table Data - UnifiController.md","tags":[{"inline":false,"label":"Database","permalink":"/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Report","permalink":"/docs/tags/report","description":"Documents focused on generating and managing reports"},{"inline":false,"label":"Security","permalink":"/docs/tags/security","description":"Documents discussing security measures and practices for IT systems"},{"inline":false,"label":"Setup","permalink":"/docs/tags/setup","description":"Documents on setting up software and hardware configurations"}],"version":"current","frontMatter":{"id":"7a09c023-231a-4574-a367-ef8009537e23","title":"Update Table Data - UnifiController","title_meta":"Update Table Data - UnifiController","keywords":["unifi","data","collection","automate","script"],"description":"This document outlines a script that launches the Get-UnifiController.ps1 file from the registry to filter and populate data into various tables related to the Unifi Controller. It includes sample runs, dependencies, variables, process steps, and output logs.","tags":["database","report","security","setup"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Update Screenconnect Version","permalink":"/docs/cwa/scripts/b04bc7eb-65ce-4684-b787-3b248fcd44f6"},"next":{"title":"User Management - Account Lockout Audit","permalink":"/docs/cwa/scripts/c7996686-560d-47e2-acbf-99ae88c3102e"}}');var n=i(474848),s=i(28453);const r={id:"7a09c023-231a-4574-a367-ef8009537e23",title:"Update Table Data - UnifiController",title_meta:"Update Table Data - UnifiController",keywords:["unifi","data","collection","automate","script"],description:"This document outlines a script that launches the Get-UnifiController.ps1 file from the registry to filter and populate data into various tables related to the Unifi Controller. It includes sample runs, dependencies, variables, process steps, and output logs.",tags:["database","report","security","setup"],draft:!1,unlisted:!1},a=void 0,o={},d=[{value:"Child of Solution",id:"child-of-solution",level:2},{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Variables",id:"variables",level:2},{value:"Global Parameters",id:"global-parameters",level:4},{value:"User Parameters",id:"user-parameters",level:4},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"child-of-solution",children:"Child of Solution"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"/docs/solutions/59fbb11b-df98-46a4-9b97-986b4f8e16f9",children:"EPM - Data Collection - Solution - CWA - Update Table Data - UnifiController"})}),"\n",(0,n.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsx)(t.p,{children:"This script launches the Get-UnifiController.ps1 file from the registry, filters out the needed information, and populates the following tables with data:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/317fccab-60e6-4af7-8866-1b4d862d973e",children:"CWM - Automate - Custom Table - plugin_proval_unificontroller"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/048bcde3-a1b4-45a9-a86c-ba19c0a40933",children:"CWM - Automate - Custom Table - plugin_proval_unifidevices"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/e4a1a60d-1e35-4336-a1a3-28e2ffb12855",children:"CWM - Automate - Custom Table - plugin_proval_unifiwireless"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Sample Run",src:i(821244).A+"",width:"484",height:"484"})}),"\n",(0,n.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,n.jsx)(t.p,{children:"This should be a list of ITGlue documents listed in the Related Items sidebar on which this script depends."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/powershell/ps-get-unificontroller",children:"EPM - Data Collection - Agnostic - Script - Get-UnifiController"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/317fccab-60e6-4af7-8866-1b4d862d973e",children:"CWM - Automate - Custom Table - plugin_proval_unificontroller"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/048bcde3-a1b4-45a9-a86c-ba19c0a40933",children:"CWM - Automate - Custom Table - plugin_proval_unifidevices"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/cwa/tables/e4a1a60d-1e35-4336-a1a3-28e2ffb12855",children:"CWM - Automate - Custom Table - plugin_proval_unifiwireless"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,n.jsx)(t.p,{children:"Document the various variables in the script. Delete any section that is not relevant to your script."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Name"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ControllerTableName"}),(0,n.jsx)(t.td,{children:"Holds the name of the Unifi Controller's data table."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"DeviceTableName"}),(0,n.jsx)(t.td,{children:"Holds the name of the Unifi Device's data table."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"WifiTableName"}),(0,n.jsx)(t.td,{children:"Holds the name of the Unifi Wireless data table."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ControllerSqlInsert"}),(0,n.jsx)(t.td,{children:"Populates the insert statement for the ControllerTableName table."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"SQLInsert"}),(0,n.jsx)(t.td,{children:"This variable is created by splitting the output of the PowerShell command; it holds the insert statement for either the DeviceTableName or the WifiTableName tables."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"totalRowsToWrite"}),(0,n.jsx)(t.td,{children:"This variable is created by splitting the output of the PowerShell command; it holds the total rows needed to write to complete all items found."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"totalRowsToLimit"}),(0,n.jsx)(t.td,{children:"This variable is created by splitting the output of the PowerShell command; it holds the total amount of rows that the command can fit before exceeding the 65,000 character limit. I intentionally left about a 500 character padding."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"global-parameters",children:"Global Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Name"}),(0,n.jsx)(t.th,{children:"Example"}),(0,n.jsx)(t.th,{children:"Required"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Port"}),(0,n.jsx)(t.td,{children:"8443"}),(0,n.jsx)(t.td,{children:"False, defaults to 8443"}),(0,n.jsx)(t.td,{children:"The port in which the Unifi Controller communicates."})]})})]}),"\n",(0,n.jsx)(t.h4,{id:"user-parameters",children:"User Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Name"}),(0,n.jsx)(t.th,{children:"Example"}),(0,n.jsx)(t.th,{children:"Required"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TargetName"}),(0,n.jsxs)(t.td,{children:["10.125.56.152, ",(0,n.jsx)(t.a,{href:"https://somecompany/unifi",children:"LocalHost"})]}),(0,n.jsx)(t.td,{children:"True"}),(0,n.jsx)(t.td,{children:"The URL, HostName, or IP address of the Unifi Controller"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"UserName"}),(0,n.jsx)(t.td,{children:"JoesSnackShack"}),(0,n.jsx)(t.td,{children:"True"}),(0,n.jsx)(t.td,{children:"The username for an admin account on the Unifi Controller."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Password"}),(0,n.jsx)(t.td,{children:"jndfgsjkoli908435!@_435j"}),(0,n.jsx)(t.td,{children:"True"}),(0,n.jsx)(t.td,{children:"The password for the admin account provided above."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Scope"}),(0,n.jsx)(t.td,{children:"Full"}),(0,n.jsx)(t.td,{children:"False"}),(0,n.jsxs)(t.td,{children:["Under Empty or Null operation, this script will populate data into the following tables: plugin_proval_unificontroller, plugin_proval_unifidevices. Under ",(0,n.jsx)(t.code,{children:"Full"})," operation, this script will additionally populate the following table: plugin_proval_unifiwireless."]})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,n.jsx)(t.p,{children:"Describe the steps the script performs to accomplish the desired task. Note that if this script is just a front-end for a piece of Agnostic Content, then you can insert a link to the documentation for that content here instead."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Downloads, executes, and formats the results of ",(0,n.jsx)(t.a,{href:"/docs/powershell/ps-get-unificontroller",children:"EPM - Data Collection - Agnostic - Script - Get-UnifiController"})," to accomplish the following:","\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Create two files on the target machine: MyUnifiController.json and MyUnifiControllerNetworks.json, containing objects for the Unifi Controller tables."}),"\n",(0,n.jsxs)(t.li,{children:["Read the data and return to Automate the following variables/values:","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["totalRowsToWrite","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The total amount of rows that need to be written to the insert statement to complete the file."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["totalRowsToLimit","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The total amount of rows that can be added to the insert statement before the character limit, including the statement before the data and the completing statement at the tail end, reaches 65,000."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["sqlInsert","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The character-limited SQL statement to execute."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Overwrite the MyUnifiController.json file with all the values, skipping totalRowsToLimit items."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Creates the ControllerTableName insert statement needed to populate data."}),"\n",(0,n.jsx)(t.li,{children:"Creates the ControllerTableName table if it doesn't exist."}),"\n",(0,n.jsx)(t.li,{children:"Runs the ControllerTableName insert statement."}),"\n",(0,n.jsx)(t.li,{children:"Creates the DeviceTableName."}),"\n",(0,n.jsx)(t.li,{children:"Executes the first returned sqlInsert statement."}),"\n",(0,n.jsx)(t.li,{children:"Creates the WifiTableName."}),"\n",(0,n.jsxs)(t.li,{children:["Checks the totalRowsToWrite against the totalRowsToLimit:","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["If totalRowsToWrite is greater:","\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Executes an SQL statement to accomplish the following:","\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Read the MyUnifiController.json file."}),"\n",(0,n.jsxs)(t.li,{children:["Return the following values:","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"ControllerID"}),"\n",(0,n.jsx)(t.li,{children:"totalRowsToWrite"}),"\n",(0,n.jsx)(t.li,{children:"totalRowsToLimit"}),"\n",(0,n.jsx)(t.li,{children:"sqlInsert"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Overwrite the MyUnifiController.json file with all the values, skipping totalRowsToLimit items."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Split the variables."}),"\n",(0,n.jsx)(t.li,{children:"Execute sqlInsert."}),"\n",(0,n.jsx)(t.li,{children:"Checks the totalRowsToWrite against the totalRowsToLimit. Returns to step 8 if totalRowsToWrite is greater."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:'Checks to see if Scope is "Full".'}),"\n",(0,n.jsx)(t.li,{children:"Logs all output."}),"\n",(0,n.jsxs)(t.li,{children:["Deletes the following files:","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"MyUnifiController.json"}),"\n",(0,n.jsx)(t.li,{children:"MyUnifiControllerNetworks.json"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:"Exits."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Script log"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},821244:(e,t,i)=>{i.d(t,{A:()=>l});const l=i.p+"assets/images/image_1-c62af06816ed0f80f6411db5e9fd6f89.png"},28453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var l=i(296540);const n={},s=l.createContext(n);function r(e){const t=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),l.createElement(s.Provider,{value:t},e.children)}}}]);