"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[21813],{573491:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"cwa/scripts/71ac312f-e490-4126-bc2d-f9c07f5582cf","title":"Get - CW-ControlAPI - Online Status","description":"The EPM - Data Collection - Script - Get - CW-ControlAPI - Online Status script is designed to fetch the online status of all machines in the ConnectWise Control application, utilizing the ProVal Tech agnostic script Get-CWControlAgentSession.ps1. It queries the Control session using the Control Plugin in Automate and stores the information in a custom table for further monitoring and reporting.","source":"@site/docs/cwa/scripts/Get - CW-ControlAPI - Online Status.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/71ac312f-e490-4126-bc2d-f9c07f5582cf","permalink":"/proval-docs/docs/cwa/scripts/71ac312f-e490-4126-bc2d-f9c07f5582cf","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Get - CW-ControlAPI - Online Status.md","tags":[{"inline":false,"label":"ConnectWise","permalink":"/proval-docs/docs/tags/connectwise","description":"Documents on ConnectWise platforms for IT service management"},{"inline":false,"label":"Database","permalink":"/proval-docs/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Report","permalink":"/proval-docs/docs/tags/report","description":"Documents focused on generating and managing reports"},{"inline":false,"label":"Setup","permalink":"/proval-docs/docs/tags/setup","description":"Documents on setting up software and hardware configurations"},{"inline":false,"label":"Windows","permalink":"/proval-docs/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"71ac312f-e490-4126-bc2d-f9c07f5582cf","title":"Get - CW-ControlAPI - Online Status","title_meta":"Get - CW-ControlAPI - Online Status","keywords":["connectwise","control","status","script","automation"],"description":"The EPM - Data Collection - Script - Get - CW-ControlAPI - Online Status script is designed to fetch the online status of all machines in the ConnectWise Control application, utilizing the ProVal Tech agnostic script Get-CWControlAgentSession.ps1. It queries the Control session using the Control Plugin in Automate and stores the information in a custom table for further monitoring and reporting.","tags":["connectwise","database","report","setup","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Generic Registry Editor","permalink":"/proval-docs/docs/cwa/scripts/2e06791d-4084-4dc3-a524-7b54695c6fc9"},"next":{"title":"Get - DNS Assignments","permalink":"/proval-docs/docs/cwa/scripts/3bf7ea38-4bea-426b-bc6d-f480ba0b895d"}}');var i=n(474848),o=n(28453);const r={id:"71ac312f-e490-4126-bc2d-f9c07f5582cf",title:"Get - CW-ControlAPI - Online Status",title_meta:"Get - CW-ControlAPI - Online Status",keywords:["connectwise","control","status","script","automation"],description:"The EPM - Data Collection - Script - Get - CW-ControlAPI - Online Status script is designed to fetch the online status of all machines in the ConnectWise Control application, utilizing the ProVal Tech agnostic script Get-CWControlAgentSession.ps1. It queries the Control session using the Control Plugin in Automate and stores the information in a custom table for further monitoring and reporting.",tags:["connectwise","database","report","setup","windows"],draft:!1,unlisted:!1},a=void 0,l={},c=[{value:"Summary",id:"summary",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Variables",id:"variables",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"The EPM - Data Collection - Script - Get - CW-ControlAPI - Online Status script is a ConnectWise Automate script designed to fetch the online status of all machines in the ConnectWise Control application. To achieve this, the script utilizes the ProVal Tech agnostic script Get-CWControlAgentSession.ps1, which is intended to run only in Automate environments. The script queries the Control session using the Control Plugin in Automate as its jump point."}),"\n",(0,i.jsxs)(t.p,{children:["The purpose of the EPM - Data Collection - Script - Get - CW-ControlAPI - Online Status script is to return the online status of all machines in Control and insert those states into a custom table named ",(0,i.jsx)(t.code,{children:"plugin_proval_control_session_status"}),". The information that the script collects is stored in the Automate database and is used by other scripts and monitors to determine the state of the machines in the ConnectWise environment."]}),"\n",(0,i.jsx)(t.h2,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"ConnectWise Control must have the Automate extension installed and configured properly."}),"\n",(0,i.jsx)(t.li,{children:"ConnectWise Automate must have the ConnectWise Control plugin installed and configured properly."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Intended Target:"})," Any Windows machine. It is suggested to schedule the script to run twice per day against the Automate server if possible; otherwise, it can be scheduled against any Windows machine."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Sample Run",src:n(131491).A+"",width:"605",height:"437"})}),"\n",(0,i.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsx)(t.p,{children:"Document the various variables in the script. Delete any section that is not relevant to your script."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Name"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"TableName"}),(0,i.jsx)(t.td,{children:"The name of the new table that will be created if it does not exist."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Server"}),(0,i.jsx)(t.td,{children:"The queried server from the ConnectWise Control plugins configuration table."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Token"}),(0,i.jsx)(t.td,{children:"The queried API key from the ConnectWise Control plugins configuration table."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"IncludeProperty"}),(0,i.jsx)(t.td,{children:"The additional included item from the API call query set to Name."})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Script log"}),"\n",(0,i.jsx)(t.li,{children:"Custom Table"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},131491:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image_1-99d61e6f8969dea2139ab32c4ae7950e.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var s=n(296540);const i={},o=s.createContext(i);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);