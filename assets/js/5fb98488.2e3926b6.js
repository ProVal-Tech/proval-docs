"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[72349],{778811:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"cwa/scripts/595e85de-299d-4242-a569-f5367be6b1c9","title":"Unapproved Patches Count Audit","description":"","source":"@site/docs/cwa/scripts/unapproved-patches-count-audit.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/595e85de-299d-4242-a569-f5367be6b1c9","permalink":"/docs/cwa/scripts/595e85de-299d-4242-a569-f5367be6b1c9","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/unapproved-patches-count-audit.md","tags":[{"inline":false,"label":"Patching","permalink":"/docs/tags/patching","description":"Documents on software patch management and update installations"},{"inline":false,"label":"Email","permalink":"/docs/tags/email","description":"Documents about email systems and their management"},{"inline":false,"label":"Database","permalink":"/docs/tags/database","description":"Documents related to database management systems and operations"}],"version":"current","frontMatter":{"id":"595e85de-299d-4242-a569-f5367be6b1c9","title":"Unapproved Patches Count Audit","title_meta":"Unapproved Patches Count Audit","keywords":["patches","approval","policy","audit","unapproved","email","proval","urgent"],"description":"","tags":["patching","email","database"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Toast Notification","permalink":"/docs/cwa/scripts/3aab837d-cb64-4669-aa35-040cce21c575"},"next":{"title":"Plugin_ProVal_Browsers_Extensions","permalink":"/docs/cwa/tables/0a6370b4-7944-4483-86d5-ecbfd58f5376"}}');var a=r(474848),d=r(28453);const n={id:"595e85de-299d-4242-a569-f5367be6b1c9",title:"Unapproved Patches Count Audit",title_meta:"Unapproved Patches Count Audit",keywords:["patches","approval","policy","audit","unapproved","email","proval","urgent"],description:"",tags:["patching","email","database"],draft:!1,unlisted:!1},i=void 0,c={},l=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Variables",id:"variables",level:2},{value:"Properties",id:"properties",level:2},{value:"Script States",id:"script-states",level:2},{value:"Output",id:"output",level:2},{value:"Sample AutoTask Ticket",id:"sample-autotask-ticket",level:2}];function o(e){const t={a:"a",br:"br",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(t.p,{children:"The script creates an urgent ticket for ProVal if the number of unapproved patches changes by a certain percentage within a day or week. The threshold for this change can be set in the system properties, which are detailed later in this document."}),"\n",(0,a.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,a.jsxs)(t.p,{children:["It is a client script and suggested to run once per day.",(0,a.jsx)(t.br,{}),"\n",(0,a.jsx)(t.img,{alt:"Image1",src:r(875177).A+"",width:"2890",height:"1219"})]}),"\n",(0,a.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Name"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"patch_denial_daily_threshold_percentage"}),(0,a.jsxs)(t.td,{children:["Threshold in percentage to create a ticket if the difference between today's and yesterday's unapproved patch percentage exceeds this value. Gathered from the ",(0,a.jsx)(t.code,{children:"patch_denial_daily_threshold_percentage"})," property."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"patch_denial_weekly_threshold_percentage"}),(0,a.jsxs)(t.td,{children:["Threshold in percentage to create a ticket if the difference between today's and last week's unapproved patch percentage exceeds this value. Gathered from the ",(0,a.jsx)(t.code,{children:"patch_denial_weekly_threshold_percentage"})," property."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"provalAlertsEmail"}),(0,a.jsxs)(t.td,{children:["ProVal's email address. Gathered from the ",(0,a.jsx)(t.code,{children:"ProVal_Alerts_Email_Address"})," property."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"currentUnapproved"}),(0,a.jsx)(t.td,{children:"Details of the currently unapproved patches."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Unapproved"}),(0,a.jsx)(t.td,{children:"Number of currently unapproved patches."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Total"}),(0,a.jsx)(t.td,{children:"Total number of patches at the time of collection."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"UnapprovedPercentage"}),(0,a.jsx)(t.td,{children:"Percentage of unapproved patches out of the total number of patches."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"ActiveApprovalPolicies"}),(0,a.jsx)(t.td,{children:"Total number of currently active approval policies."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayUnapproved"}),(0,a.jsx)(t.td,{children:"Number of patches that were unapproved yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayTotal"}),(0,a.jsx)(t.td,{children:"Total number of patches from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayUnapprovedPercentage"}),(0,a.jsx)(t.td,{children:"Percentage of unapproved patches from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayActiveApprovalPolicies"}),(0,a.jsx)(t.td,{children:"Total number of approval policies that were active yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekUnapproved"}),(0,a.jsx)(t.td,{children:"Number of patches that were unapproved last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekTotal"}),(0,a.jsx)(t.td,{children:"Total number of patches from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekUnapprovedPercentage"}),(0,a.jsx)(t.td,{children:"Percentage of unapproved patches from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekActiveApprovalPolicies"}),(0,a.jsx)(t.td,{children:"Total number of approval policies that were active last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayIncrementComparision"}),(0,a.jsx)(t.td,{children:"Comparison of the increment in unapproved patches percentage from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayDecrementComparision"}),(0,a.jsx)(t.td,{children:"Comparison of the decrement in unapproved patches percentage from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"weeklyIncrementComparision"}),(0,a.jsx)(t.td,{children:"Comparison of the increment in unapproved patches percentage from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"weeklyDecrementComparision"}),(0,a.jsx)(t.td,{children:"Comparison of the decrement in unapproved patches percentage from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"weeklyTicketGenerated"}),(0,a.jsx)(t.td,{children:"A variable used to reset the week after creating a weekly ticket. A weekly ticket will be created as soon as the weekly threshold has been breached instead of waiting for the full 7 days."})]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Name"}),(0,a.jsx)(t.th,{children:"Default"}),(0,a.jsx)(t.th,{children:"Required"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"patch_denial_daily_threshold_percentage"}),(0,a.jsx)(t.td,{children:"10"}),(0,a.jsx)(t.td,{children:"True"}),(0,a.jsx)(t.td,{children:"Threshold in percentage to create a ticket if the difference between today's and yesterday's unapproved patch percentage exceeds this value."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"patch_denial_weekly_threshold_percentage"}),(0,a.jsx)(t.td,{children:"20"}),(0,a.jsx)(t.td,{children:"True"}),(0,a.jsx)(t.td,{children:"Threshold in percentage to create a ticket if the difference between today's and last week's unapproved patch percentage exceeds this value."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"ProVal_Alerts_Email_Address"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"})}),(0,a.jsx)(t.td,{children:"True"}),(0,a.jsx)(t.td,{children:"ProVal's email address"})]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"script-states",children:"Script States"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Name"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayActiveApprovalPolicies"}),(0,a.jsx)(t.td,{children:"Total number of approval policies that were active yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayTotal"}),(0,a.jsx)(t.td,{children:"Total number of patches from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayUnapproved"}),(0,a.jsx)(t.td,{children:"Number of patches that were unapproved yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"yesterdayUnapprovedPercentage"}),(0,a.jsx)(t.td,{children:"Percentage of unapproved patches from yesterday."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekActiveApprovalPolicies"}),(0,a.jsx)(t.td,{children:"Total number of approval policies that were active last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekTotal"}),(0,a.jsx)(t.td,{children:"Total number of patches from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekUnapproved"}),(0,a.jsx)(t.td,{children:"Number of patches that were unapproved last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekUnapprovedPercentage"}),(0,a.jsx)(t.td,{children:"Percentage of unapproved patches from last week."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"lastWeekUpdateDate"}),(0,a.jsx)(t.td,{children:"Date of the last week's update."})]})]})]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Note:"})," The script states can not be viewed from any computer as they will not be associated with any agent."]}),"\n",(0,a.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Script log"}),"\n",(0,a.jsx)(t.li,{children:"Email"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"sample-autotask-ticket",children:"Sample AutoTask Ticket"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"One day threshold violation:"}),(0,a.jsx)(t.br,{}),"\n",(0,a.jsx)(t.img,{alt:"SampleYesterdayTicket",src:r(236415).A+"",width:"3202",height:"1583"})]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Week's threshold violation:"}),(0,a.jsx)(t.br,{}),"\n",(0,a.jsx)(t.img,{alt:"SampleLastWeekTicket",src:r(725983).A+"",width:"2697",height:"1551"})]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.em,{children:"The numbers shown in the sample tickets are for demonstration purposes only and will be different and more practical in the actual tickets."})})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},875177:(e,t,r)=>{r.d(t,{A:()=>s});const s=r.p+"assets/images/Image1-104093731c5944dc7dd37d6d538af276.png"},725983:(e,t,r)=>{r.d(t,{A:()=>s});const s=r.p+"assets/images/SampleLastWeekTicket-d8f9bff7a75807dfa1756102051b6880.png"},236415:(e,t,r)=>{r.d(t,{A:()=>s});const s=r.p+"assets/images/SampleYesterdayTicket-2de4821a0c7af4621f661ffb8a5a6d5f.png"},28453:(e,t,r)=>{r.d(t,{R:()=>n,x:()=>i});var s=r(296540);const a={},d=s.createContext(a);function n(e){const t=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),s.createElement(d.Provider,{value:t},e.children)}}}]);