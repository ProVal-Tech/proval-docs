"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[24680],{132711:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"cwa/scripts/c96624e1-038a-45ca-a6d0-645a629af721","title":"Queue Script","description":"This document outlines a script that schedules another script to run on a computer during its next check-in with the system. It includes details on dependencies, variables, user parameters, and processes involved in setting up the scheduled script.","source":"@site/docs/cwa/scripts/Queue Script.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/c96624e1-038a-45ca-a6d0-645a629af721","permalink":"/proval-docs/docs/cwa/scripts/c96624e1-038a-45ca-a6d0-645a629af721","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Queue Script.md","tags":[{"inline":false,"label":"Database","permalink":"/proval-docs/docs/tags/database","description":"Documents related to database management systems and operations"},{"inline":false,"label":"Setup","permalink":"/proval-docs/docs/tags/setup","description":"Documents on setting up software and hardware configurations"}],"version":"current","frontMatter":{"id":"c96624e1-038a-45ca-a6d0-645a629af721","title":"Queue Script","title_meta":"Queue Script","keywords":["schedule","script","checkin","automate","queued"],"description":"This document outlines a script that schedules another script to run on a computer during its next check-in with the system. It includes details on dependencies, variables, user parameters, and processes involved in setting up the scheduled script.","tags":["database","setup"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Purge IIS Logs Older than X Days Param","permalink":"/proval-docs/docs/cwa/scripts/a7a7e04e-384d-4018-87c5-6abf2d2b2fb2"},"next":{"title":"Re-Register Huntress Agent Windows","permalink":"/proval-docs/docs/cwa/scripts/6cf7ba91-b78d-4368-91a2-43095fad952b"}}');var r=s(474848),n=s(28453);const c={id:"c96624e1-038a-45ca-a6d0-645a629af721",title:"Queue Script",title_meta:"Queue Script",keywords:["schedule","script","checkin","automate","queued"],description:"This document outlines a script that schedules another script to run on a computer during its next check-in with the system. It includes details on dependencies, variables, user parameters, and processes involved in setting up the scheduled script.",tags:["database","setup"],draft:!1,unlisted:!1},a=void 0,d={},l=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Variables",id:"variables",level:2},{value:"User Parameters",id:"user-parameters",level:4},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function o(e){const t={a:"a",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(t.p,{children:"This script will schedule a script to run on a computer the next time it checks in."}),"\n",(0,r.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Sample Run",src:s(327682).A+"",width:"484",height:"428"})}),"\n",(0,r.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/proval-docs/docs/solutions/2910ca09-a0c7-4b44-8ea4-ef6e71304df8",children:"CWM - Automate - Solution - Queue Script Next Checkin"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/proval-docs/docs/cwa/tables/a20befa8-ecca-4cf9-9d18-c4140f87aafc",children:"CWM - Automate - Custom Table - plugin_proval_queued_scripts"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/f60f4501-a2ea-43f0-87ee-99fc8ee15031",children:"CWM - Automate - Script - Run Queued Scripts"})}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,r.jsx)(t.p,{children:"Document the various variables in the script. Delete any section that is not relevant to your script."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TableName"}),(0,r.jsx)(t.td,{children:"The custom table to be created."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"GroupName"}),(0,r.jsx)(t.td,{children:"The name of the group that is created by this script"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"GroupID"}),(0,r.jsx)(t.td,{children:"The system ID for the group"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RetrievalScript"}),(0,r.jsx)(t.td,{children:"The script ID for the Run Queued Scripts script."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ATName"}),(0,r.jsx)(t.td,{children:"The name of the designated Autofix action. (~Autofix - Run Queued Scripts)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ATComment"}),(0,r.jsx)(t.td,{children:"The comment associated with the creation of the autofix action (Automatically Created Script by @ltrunbyuser@ This was created to run @ScriptName@)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ATGuid"}),(0,r.jsx)(t.td,{children:"The alert template needs a GUID statically set to (883f5185-289a-4763-8cc2-e4bf7dd1fb82)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"AlertActionID"}),(0,r.jsx)(t.td,{children:"Holds the ID of the created Alert Action"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"AgentID"}),(0,r.jsx)(t.td,{children:"This holds the ID of the alert action"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"MonitorSQL"}),(0,r.jsx)(t.td,{children:"This is the monitor conditions to check for the online agent."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"SQLInsert"}),(0,r.jsx)(t.td,{children:"The insert statement for the process"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"user-parameters",children:"User Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ScriptId"}),(0,r.jsx)(t.td,{children:"7995"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"The script ID for the script you wish to schedule"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ScriptParameters"}),(0,r.jsx)(t.td,{children:"message=Hi There"}),(0,r.jsx)(t.td,{children:"False"}),(0,r.jsx)(t.td,{children:"Any parameters that need to be passed to the above script."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Offline"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Create the table if it doesn't exist."}),"\n",(0,r.jsx)(t.li,{children:"If the group 'Machines with Queued Scripts' doesn't exist, create it and move on."}),"\n",(0,r.jsx)(t.li,{children:"Get the group ID for the above group."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the target machine is a member of the group; if not, add the computer to the group."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the alert template exists; if it doesn't, create it."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the alert template action exists; if not, create it."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the alert template is assigned to the group; if not, assign it."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the autofix action is assigned to the monitor; if not, assign it."}),"\n",(0,r.jsx)(t.li,{children:"Check to see if the target script exists in the custom table for that target computer; if it doesn't, add it to the custom table."}),"\n",(0,r.jsx)(t.li,{children:"Add the computer to the group."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Online"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Schedule the script to run now on the machine."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Script log"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},327682:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/image_1-def084b93292084099496e84a290e736.png"},28453:(e,t,s)=>{s.d(t,{R:()=>c,x:()=>a});var i=s(296540);const r={},n=i.createContext(r);function c(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);