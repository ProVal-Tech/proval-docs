"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[55617],{933096:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>n,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"cwa/scripts/901470a2-73d2-4d29-b0d3-c5f15cf19c41","title":"Email Creation - Computer Failure Only","description":"This document describes a script designed to send email notifications for failed outcomes of a RAWSQL monitor. It details the email addresses used for notifications, system properties required, and the process flow for handling failures. The script is linked to a specific alert template and includes configuration for success email notifications.","source":"@site/docs/cwa/scripts/Email Creation - Computer Failure Only.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/901470a2-73d2-4d29-b0d3-c5f15cf19c41","permalink":"/proval-docs/docs/cwa/scripts/901470a2-73d2-4d29-b0d3-c5f15cf19c41","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/Email Creation - Computer Failure Only.md","tags":[{"inline":false,"label":"Email","permalink":"/proval-docs/docs/tags/email","description":"Documents about email systems and their management"}],"version":"current","frontMatter":{"id":"901470a2-73d2-4d29-b0d3-c5f15cf19c41","title":"Email Creation - Computer Failure Only","title_meta":"Email Creation - Computer Failure Only","keywords":["email","rawsql","monitor","failure","notification"],"description":"This document describes a script designed to send email notifications for failed outcomes of a RAWSQL monitor. It details the email addresses used for notifications, system properties required, and the process flow for handling failures. The script is linked to a specific alert template and includes configuration for success email notifications.","tags":["email"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Email - EDF - Machine Back Online Autofix","permalink":"/proval-docs/docs/cwa/scripts/c32c5921-0bd1-4e4a-b605-baa0e958fbc0"},"next":{"title":"Email Creation - Computer LTRunByUser","permalink":"/proval-docs/docs/cwa/scripts/aff3413b-574f-4399-8f4b-85e04d388c5a"}}');var r=s(474848),a=s(28453);const l={id:"901470a2-73d2-4d29-b0d3-c5f15cf19c41",title:"Email Creation - Computer Failure Only",title_meta:"Email Creation - Computer Failure Only",keywords:["email","rawsql","monitor","failure","notification"],description:"This document describes a script designed to send email notifications for failed outcomes of a RAWSQL monitor. It details the email addresses used for notifications, system properties required, and the process flow for handling failures. The script is linked to a specific alert template and includes configuration for success email notifications.",tags:["email"],draft:!1,unlisted:!1},n=void 0,o={},c=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"System Property",id:"system-property",level:2},{value:"Global Parameter",id:"global-parameter",level:2},{value:"Variables",id:"variables",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={a:"a",br:"br",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(t.p,{children:["This script functions similarly to the ",(0,r.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"CWM - Automate - Script - Ticket Creation - Computer"})," script; however, instead of creating a ticket, it is designed to send the FAILED outcomes of a RAWSQL monitor to the email address provided in the system property."]}),"\n",(0,r.jsx)(t.p,{children:"This script sends emails to two different addresses:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:['If the script is called by the alert template "',(0,r.jsx)(t.strong,{children:"\u25b3 Custom - Email RAWSQL Monitor set results to ProVal"}),'", it will send an email to the email address set at the system property "ProVal_Alerts_Email_Address", which is typically set to "',(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"}),'".',(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.strong,{children:"Note:"}),' If the property is missing, the script will automatically set it to "',(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"}),'", but if it is set to a different email address, then it will not be modified.']}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:'If the script is called by any other template, it will fetch the email address from the system property "_sysTicketDefaultEmail".'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Note:"})," The script is designed to send only failure messages/emails."]}),"\n",(0,r.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,r.jsx)(t.p,{children:'It\'s an Autofix script and is currently attached to the "\u25b3 Custom - Email RAWSQL Monitor set results to ProVal" alert template.'}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Sample Run",src:s(877147).A+"",width:"474",height:"342"})}),"\n",(0,r.jsx)(t.h2,{id:"system-property",children:"System Property"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"_sysTicketDefaultEmail"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"mailto:test@test.com",children:"test@test.com"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsxs)(t.td,{children:['This email address is used when the script is called from an alert template other than "',(0,r.jsx)(t.strong,{children:"\u25b3 Custom - Email RAWSQL Monitor set results to ProVal"}),'".']})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ProVal_Alerts_Email_Address"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"})}),(0,r.jsx)(t.td,{children:"Yes"}),(0,r.jsxs)(t.td,{children:['This email address is used when the script is called from the alert template "',(0,r.jsx)(t.strong,{children:"\u25b3 Custom - Email RAWSQL Monitor set results to ProVal"}),'". ',(0,r.jsx)(t.strong,{children:"Note:"})," It is mandatory to use ",(0,r.jsx)(t.a,{href:"mailto:alerts@provaltech.com",children:"alerts@provaltech.com"})," with this system property as it is intentionally created for alerts that need to be passed on to the ProVal support team from the partner environment."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"global-parameter",children:"Global Parameter"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Example"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"EmailOnSuccess"}),(0,r.jsx)(t.td,{children:"0"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{children:"0 disables emailing a success email; 1 enables emailing a success email."})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FIELDNAME"}),(0,r.jsx)(t.td,{children:"Identity Field of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"TicketSubject"}),(0,r.jsx)(t.td,{children:"Ticket Subject from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"SuccessMSG"}),(0,r.jsx)(t.td,{children:"Success Message from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"FailedMSG"}),(0,r.jsx)(t.td,{children:"Failure Message from the alerting tab of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Status"}),(0,r.jsx)(t.td,{children:"FAILED/SUCCESS status of the monitor set"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Email"}),(0,r.jsx)(t.td,{children:"Email address of the contact/user used in the alert template"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Dataout"}),(0,r.jsx)(t.td,{children:"Monitor set's statement"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Dataoutlength"}),(0,r.jsx)(t.td,{children:"Position of the last parentheses in the monitor set's query; this is calculated to remove (select computerid from tcomp) from the monitor set's statement. Keeping this statement will lead to the script's failure."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitor"}),(0,r.jsx)(t.td,{children:"Name of the monitor set"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Check the status of the monitor set and do not act for Success."}),"\n",(0,r.jsx)(t.li,{children:"For failures, proceed accordingly."}),"\n",(0,r.jsxs)(t.li,{children:["Store the SQL query used in the monitor set to the ",(0,r.jsx)(t.a,{href:"the%C2%A0@Dataout@",children:"@Dataout@"})," variable. Also, replace 'from tcomp' with 'from computers', if it exists in the SQL query. To perform this replacement, convert the whole query to lowercase."]}),"\n",(0,r.jsxs)(t.li,{children:["Find the FieldName, ",(0,r.jsx)(t.a,{href:"http://TicketSubject,SuccessMSG",children:"TicketSubject, SuccessMSG"}),", ",(0,r.jsx)(t.a,{href:"http://FailedMSG",children:"FailedMSG"}),", and Email."]}),"\n",(0,r.jsx)(t.li,{children:"Email the outcome to the email address of the user/contact of the alert template."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,r.jsx)(t.p,{children:"Email"})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},877147:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/image_1-d4a45ef037446eadc8ad7b2be5fdd0a3.png"},28453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>n});var i=s(296540);const r={},a=i.createContext(r);function l(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);