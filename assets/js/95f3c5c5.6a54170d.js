"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[41692],{838366:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cwa/scripts/e7e6a0f4-6d21-4046-89ee-1e9dd5827221","title":"CW Control - User Audit","description":"This document outlines a script designed to run on the ConnectWise Control server, auditing user information and logging it into a custom table. It details the necessary dependencies, variables used in the script, and the output generated, including a dataview for user audits and a script log. The automation is expected to save approximately 15 minutes of manual effort.","source":"@site/docs/cwa/scripts/CW Control - User Audit.md","sourceDirName":"cwa/scripts","slug":"/cwa/scripts/e7e6a0f4-6d21-4046-89ee-1e9dd5827221","permalink":"/docs/cwa/scripts/e7e6a0f4-6d21-4046-89ee-1e9dd5827221","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/scripts/CW Control - User Audit.md","tags":[{"inline":false,"label":"ConnectWise","permalink":"/docs/tags/connectwise","description":"Documents on ConnectWise platforms for IT service management"},{"inline":false,"label":"Database","permalink":"/docs/tags/database","description":"Documents related to database management systems and operations"}],"version":"current","frontMatter":{"id":"e7e6a0f4-6d21-4046-89ee-1e9dd5827221","title":"CW Control - User Audit","title_meta":"CW Control - User Audit","keywords":["connectwise","audit","user","control","script"],"description":"This document outlines a script designed to run on the ConnectWise Control server, auditing user information and logging it into a custom table. It details the necessary dependencies, variables used in the script, and the output generated, including a dataview for user audits and a script log. The automation is expected to save approximately 15 minutes of manual effort.","tags":["connectwise","database"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"CW Control - Uninstall and Remove from Control Web Portal","permalink":"/docs/cwa/scripts/d69c20e1-e605-4cf9-bf35-bbe4c74f134f"},"next":{"title":"CW Control Hosted Access Agent Install","permalink":"/docs/cwa/scripts/74015094-9d3e-49e8-9add-06dfe9c42b5f"}}');var i=n(474848),a=n(28453);const r={id:"e7e6a0f4-6d21-4046-89ee-1e9dd5827221",title:"CW Control - User Audit",title_meta:"CW Control - User Audit",keywords:["connectwise","audit","user","control","script"],description:"This document outlines a script designed to run on the ConnectWise Control server, auditing user information and logging it into a custom table. It details the necessary dependencies, variables used in the script, and the output generated, including a dataview for user audits and a script log. The automation is expected to save approximately 15 minutes of manual effort.",tags:["connectwise","database"],draft:!1,unlisted:!1},o=void 0,l={},d=[{value:"Summary",id:"summary",level:2},{value:"Sample Run",id:"sample-run",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Variables",id:"variables",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function c(e){const t={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(t.p,{children:["This script runs on the Control server and audits ConnectWise Control user information to a custom table ",(0,i.jsx)(t.a,{href:"/docs/cwa/tables/ea80aef5-944c-4407-a632-2df65e15b4df",children:"plugin_proval_controluseraudit"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["It displays information in the dataview ",(0,i.jsx)(t.strong,{children:"@CW Control - User Audit"}),".",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Time Saved by Automation:"})," 15 Minutes"]}),"\n",(0,i.jsx)(t.h2,{id:"sample-run",children:"Sample Run"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Sample Run",src:n(55771).A+"",width:"482",height:"353"})}),"\n",(0,i.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Must be run on Control Server"}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/docs/cwa/tables/ea80aef5-944c-4407-a632-2df65e15b4df",children:"plugin_proval_controluseraudit"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"@insertStatement@"})," - Fetches the information of all the users that will be inserted into the custom table."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"@2FAColumnExists@"})," - Verifies if the 2FA column exists or not."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Runs PowerShell and fetches all the information of Control users."}),"\n",(0,i.jsx)(t.li,{children:"Verifies if the 2FA column exists; if it doesn't exist, it will drop the table; otherwise, it creates the table with all the information."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Script log"}),"\n",(0,i.jsxs)(t.li,{children:["Dataview ",(0,i.jsx)(t.strong,{children:"@CW Control - User Audit"})]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},55771:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/image_1-d4e5e701c04725b88072e28c1a7aa3e6.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(296540);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);