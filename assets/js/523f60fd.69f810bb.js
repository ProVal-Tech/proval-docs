"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[46309],{163139:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"vsa/procedures/3718e4a9-a415-450a-ba5f-f68d7bb63277","title":"Service Restart Template","description":"This document outlines the process for restarting the Windows Update service on an endpoint. It includes example logs, dependencies, and details about the execution process, as well as the output generated by the procedure.","source":"@site/docs/vsa/procedures/Service Restart Template.md","sourceDirName":"vsa/procedures","slug":"/vsa/procedures/3718e4a9-a415-450a-ba5f-f68d7bb63277","permalink":"/proval-docs/docs/vsa/procedures/3718e4a9-a415-450a-ba5f-f68d7bb63277","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/vsa/procedures/Service Restart Template.md","tags":[{"inline":false,"label":"Update","permalink":"/proval-docs/docs/tags/update","description":"Documents discussing software and system updates and their management"},{"inline":false,"label":"Windows","permalink":"/proval-docs/docs/tags/windows","description":"Documents related to Microsoft Windows operating system and its functionalities"}],"version":"current","frontMatter":{"id":"3718e4a9-a415-450a-ba5f-f68d7bb63277","title":"Service Restart Template","title_meta":"Service Restart Template","keywords":["service","restart","windows","update","endpoint"],"description":"This document outlines the process for restarting the Windows Update service on an endpoint. It includes example logs, dependencies, and details about the execution process, as well as the output generated by the procedure.","tags":["update","windows"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"SentinelOne - Install","permalink":"/proval-docs/docs/vsa/procedures/e51e1f76-4cc2-4ad5-bc6d-74678c0109a3"},"next":{"title":"Set-PowerPlan","permalink":"/proval-docs/docs/vsa/procedures/9aa93802-fded-4dc8-9c58-761410b5755d"}}');var n=s(474848),o=s(28453);const c={id:"3718e4a9-a415-450a-ba5f-f68d7bb63277",title:"Service Restart Template",title_meta:"Service Restart Template",keywords:["service","restart","windows","update","endpoint"],description:"This document outlines the process for restarting the Windows Update service on an endpoint. It includes example logs, dependencies, and details about the execution process, as well as the output generated by the procedure.",tags:["update","windows"],draft:!1,unlisted:!1},a=void 0,i={},l=[{value:"Summary",id:"summary",level:2},{value:"Example Agent Procedure Log",id:"example-agent-procedure-log",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Process",id:"process",level:2},{value:"Output",id:"output",level:2}];function d(e){const t={a:"a",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsx)(t.p,{children:"Restarts a service on the endpoint."}),"\n",(0,n.jsx)(t.h2,{id:"example-agent-procedure-log",children:"Example Agent Procedure Log"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:23 PM 18-Oct-22"})," Windows Update Service Restart - Success THEN provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:23 PM 18-Oct-22"})," Windows Update Service Restart-0003 - bits, wuauserv Restarted Successfully on endpoint. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:23 PM 18-Oct-22"})," Windows Update Service Restart - Raw PS1 Data: WARNING: Waiting for service 'Background Intelligent Transfer Service (bits)' to start... WARNING: Waiting for service 'Background Intelligent Transfer Service (bits)' to start... Name Success ---- ------- bits True wuauserv True provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:23 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System) - Success THEN provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:22 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0016 - Powershell command complete. Results returned to global variable #global",":psresult","# and saved in Agent's Documents tab of server. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:22 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0016 - Informational: GetFile command overwrote the server file C:/Kaseya/UserProfiles/735959849026022/GetFiles/../docs/psoutput.txt with the new contents from c:/provaltech/psoutput.txt in THEN step 3. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:12 PM 18-Oct-22"}),' Execute Powershell Command (64-bit, Run As System)-0011 - Executing 64-bit Powershell command as System: "" -command "%ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService.ps1 -ServiceNames bits,wuauserv" >"c:/provaltech/psoutputtmp.txt" provaltech.com/dan.hicks']}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:12 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0013 - Sending output to global variable. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:12 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0008 - Custom commands detected as %ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService.ps1 -ServiceNames bits,wuauserv provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:12 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0003 - No powershell file variable detected. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:11 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0002 - Powershell is present. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:08 PM 18-Oct-22"})," Windows Update Service Restart-0001 - Previous log saved as %ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService-log-20221018011704.txt provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:08 PM 18-Oct-22"})," Write text to file - Success THEN provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:07 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System) - Success THEN provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:07 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0016 - Powershell command complete. Results returned to global variable #global",":psresult","# and saved in Agent's Documents tab of server. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:07 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0016 - Informational: GetFile command overwrote the server file C:/Kaseya/UserProfiles/735959849026022/GetFiles/../docs/psoutput.txt with the new contents from c:/provaltech/psoutput.txt in THEN step 3. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:04 PM 18-Oct-22"}),' Execute Powershell Command (64-bit, Run As System)-0011 - Executing 64-bit Powershell command as System: "" -command "$time = Get-ChildItem -Path %ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService-log.txt | select-object -ExpandProperty CreationTime; $time = (Get-Date).ToString(\'yyyyMMddhhmmss\'); $time" >"c:/provaltech/psoutputtmp.txt" provaltech.com/dan.hicks']}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:04 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0013 - Sending output to global variable. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:04 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0008 - Custom commands detected as $time = Get-ChildItem -Path %ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService-log.txt | select-object -ExpandProperty CreationTime; $time = (Get-Date).ToString('yyyyMMddhhmmss'); $time provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:04 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0003 - No powershell file variable detected. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:03 PM 18-Oct-22"})," Execute Powershell Command (64-bit, Run As System)-0002 - Powershell is present. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:01 PM 18-Oct-22"})," Windows Update Service Restart-0001 - Previous run detected. Renaming Existing Log provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:01 PM 18-Oct-22"})," Execute Powershell Command - Success THEN provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:17:01 PM 18-Oct-22"})," Execute Powershell Command-0011 - Powershell command completed! provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:59 PM 18-Oct-22"}),' Execute Powershell Command-0011 - Executing powershell "" -Command "New-Item -Type Directory -Path $env',":ProgramData",'/_automation/AgentProcedure -name ServiceRestart" "" provaltech.com/dan.hicks']}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:59 PM 18-Oct-22"})," Execute Powershell Command-0010 - Not sending output to variable. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:59 PM 18-Oct-22"}),' Execute Powershell Command-0008 - New command variable is: -Command "New-Item -Type Directory -Path $env',":ProgramData",'/_automation/AgentProcedure -name ServiceRestart" provaltech.com/dan.hicks']}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:59 PM 18-Oct-22"})," Execute Powershell Command-0008 - Custom commands detected as New-Item -Type Directory -Path $env",":ProgramData","/_automation/AgentProcedure -name ServiceRestart provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:56 PM 18-Oct-22"})," Execute Powershell Command-0002 - Powershell is present. provaltech.com/dan.hicks"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"1:16:48 PM 18-Oct-22"})," Run Now - Windows Update Service Restart - Admin provaltech.com/dan.hicks scheduled procedure Run Now - Windows Update Service Restart to run at Oct 18 2022 1:16 PM"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"/proval-docs/docs/powershell/ps-invoke-restartservice",children:"EPM - Windows Configuration - Agnostic - Invoke-RestartService"})}),"\n",(0,n.jsx)(t.h2,{id:"process",children:"Process"}),"\n",(0,n.jsx)(t.p,{children:"Calls the agnostic content to force a service restart on the endpoint. Performs any necessary log archival and reports to the Agent Procedure Log."}),"\n",(0,n.jsx)(t.h2,{id:"output",children:"Output"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"%ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService-log.txt"}),"\n",(0,n.jsx)(t.li,{children:"%ProgramData%/_automation/AgentProcedure/ServiceRestart/Invoke-RestartService-UNIXDATE-log.txt (archive of previous log)"}),"\n",(0,n.jsx)(t.li,{children:"Agent Procedure Log"}),"\n"]})]})}function m(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>c,x:()=>a});var r=s(296540);const n={},o=r.createContext(n);function c(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);