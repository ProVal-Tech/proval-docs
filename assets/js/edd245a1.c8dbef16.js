"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[15481],{66963:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"cwa/monitors/9e0a1ae1-c888-496b-b161-c154fc48466e","title":"Agent ID assignment discrepancy","description":"This document outlines a monitoring set that creates a ticket in ConnectWise Automate whenever two or more machines report to a single agent, indicating potential discrepancies in machine identity. It includes details on how to address the issue through command execution and provides necessary SQL results for tracking changes.","source":"@site/docs/cwa/monitors/Agent ID assignment discrepancy.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/9e0a1ae1-c888-496b-b161-c154fc48466e","permalink":"/proval-docs/docs/cwa/monitors/9e0a1ae1-c888-496b-b161-c154fc48466e","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Agent ID assignment discrepancy.md","tags":[{"inline":false,"label":"ConnectWise","permalink":"/proval-docs/docs/tags/connectwise","description":"Documents on ConnectWise platforms for IT service management"}],"version":"current","frontMatter":{"id":"9e0a1ae1-c888-496b-b161-c154fc48466e","title":"Agent ID assignment discrepancy","title_meta":"Agent ID assignment discrepancy","keywords":["monitor","agent","discrepancy","ticket","automate","remediation"],"description":"This document outlines a monitoring set that creates a ticket in ConnectWise Automate whenever two or more machines report to a single agent, indicating potential discrepancies in machine identity. It includes details on how to address the issue through command execution and provides necessary SQL results for tracking changes.","tags":["connectwise"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Agent Counts Recorder G","permalink":"/proval-docs/docs/cwa/monitors/62a3e31e-a993-42f9-befe-d6649cea5df6"},"next":{"title":"Agent Not Patched  45 Days - Patch History","permalink":"/proval-docs/docs/cwa/monitors/6cfe8a08-851e-42fe-8999-c4526007f572"}}');var i=n(474848),o=n(28453);const a={id:"9e0a1ae1-c888-496b-b161-c154fc48466e",title:"Agent ID assignment discrepancy",title_meta:"Agent ID assignment discrepancy",keywords:["monitor","agent","discrepancy","ticket","automate","remediation"],description:"This document outlines a monitoring set that creates a ticket in ConnectWise Automate whenever two or more machines report to a single agent, indicating potential discrepancies in machine identity. It includes details on how to address the issue through command execution and provides necessary SQL results for tracking changes.",tags:["connectwise"],draft:!1,unlisted:!1},r=void 0,c={},d=[{value:"Summary",id:"summary",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Target",id:"target",level:2}];function l(e){const t={a:"a",br:"br",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"The monitor set will create a ticket whenever two or more machines are checking into a single Automate agent. It looks for instances where the name for the agent ID has changed more than two times in the last seven days."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Subject:"})," LT - Agent Discrepancy Found with %computername% (%computerID%)"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Alert on Failure:"})," The agent with the ID of %ComputerID% is currently reporting that its computer name has changed %Result% times within the past seven days.",(0,i.jsx)(t.br,{}),"\n","%FieldName%"]}),"\n",(0,i.jsx)(t.p,{children:"To remediate this issue, please log in to ConnectWise Control --\x3e Find one of the affected PCs (shown above) --\x3e Run the following command on one of the agents through the Command Tab:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"#!ps\r\n#maxlength=10000\r\n#timeout=100000\r\n[Net.ServicePointManager]::SecurityProtocol = [Enum]::ToObject([Net.SecurityProtocolType], 3072)\r\n(new-object Net.WebClient).DownloadString('https://raw.githubusercontent.com/LabtechConsulting/LabTech-Powershell-Module/master/LabTech.psm1') | iex; Reset-LTService\n"})}),"\n",(0,i.jsxs)(t.p,{children:["If you would like to run it within PowerShell, outside of Control, simply remove any lines with ",(0,i.jsx)(t.code,{children:"#"})," in front of them."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Alert on Success:"})," There is no longer any indication of a discrepancy with the machine %Computername%. Closing ticket."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Alert Template:"})," ~Custom - Ticket Creation - Computer"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"SQL Result (TestValue):"})," This should output the physical number of PC name changes that have occurred in the past seven days."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"SQL FieldName (IdentityField):"})," This should simply show the PCs affected, as in the example below:",(0,i.jsx)(t.br,{}),"\n","PCs Affected: PC-2, PC-19, PC-3"]}),"\n",(0,i.jsx)(t.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/proval-docs/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"CWM - Automate - Script - Ticket Creation - Computer"})}),"\n",(0,i.jsx)(t.h2,{id:"target",children:"Target"}),"\n",(0,i.jsx)(t.p,{children:"Global"})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var s=n(296540);const i={},o=s.createContext(i);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);