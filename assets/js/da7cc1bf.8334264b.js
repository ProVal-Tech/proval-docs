"use strict";(self.webpackChunkproval_docs=self.webpackChunkproval_docs||[]).push([[29384],{283925:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"cwa/monitors/4e3fc053-3ccd-4262-b8e8-662222500e06","title":"Implement - Remote Monitor - HP Hardware Monitoring","description":"This document outlines the step-by-step process to set up HP Hardware Monitoring in ConnectWise Automate, including importing alert templates, running SQL queries, and configuring monitors for HP servers.","source":"@site/docs/cwa/monitors/Implement - Remote Monitor - HP Hardware Monitoring.md","sourceDirName":"cwa/monitors","slug":"/cwa/monitors/4e3fc053-3ccd-4262-b8e8-662222500e06","permalink":"/docs/cwa/monitors/4e3fc053-3ccd-4262-b8e8-662222500e06","draft":false,"unlisted":false,"editUrl":"https://github.com/proval-tech/proval-docs/tree/main/docs/cwa/monitors/Implement - Remote Monitor - HP Hardware Monitoring.md","tags":[{"inline":false,"label":"HP","permalink":"/docs/tags/hp","description":"Documents related to HP hardware and associated technologies"},{"inline":false,"label":"Setup","permalink":"/docs/tags/setup","description":"Documents on setting up software and hardware configurations"},{"inline":false,"label":"SQL","permalink":"/docs/tags/sql","description":"Documents discussing Structured Query Language and database interactions"}],"version":"current","frontMatter":{"id":"4e3fc053-3ccd-4262-b8e8-662222500e06","title":"Implement - Remote Monitor - HP Hardware Monitoring","title_meta":"Implement - Remote Monitor - HP Hardware Monitoring","keywords":["setup","monitoring","hp","hardware","alerts"],"description":"This document outlines the step-by-step process to set up HP Hardware Monitoring in ConnectWise Automate, including importing alert templates, running SQL queries, and configuring monitors for HP servers.","tags":["hp","setup","sql"],"draft":false,"unlisted":false},"sidebar":"contentSidebar","previous":{"title":"Implement - Active Directory Replication Anomaly Monitoring","permalink":"/docs/cwa/monitors/495df667-0690-48e0-b929-f7671e9fc92c"},"next":{"title":"Implement - Remote Monitor - Mega RAID Errors","permalink":"/docs/cwa/monitors/94acea25-1d14-4ccd-8991-045331d05fde"}}');var a=r(474848),s=r(28453);const o={id:"4e3fc053-3ccd-4262-b8e8-662222500e06",title:"Implement - Remote Monitor - HP Hardware Monitoring",title_meta:"Implement - Remote Monitor - HP Hardware Monitoring",keywords:["setup","monitoring","hp","hardware","alerts"],description:"This document outlines the step-by-step process to set up HP Hardware Monitoring in ConnectWise Automate, including importing alert templates, running SQL queries, and configuring monitors for HP servers.",tags:["hp","setup","sql"],draft:!1,unlisted:!1},i=void 0,c={},d=[{value:"Steps",id:"steps",level:2},{value:"1. Import the Alert Template",id:"1-import-the-alert-template",level:3},{value:"2. Validate the Script",id:"2-validate-the-script",level:3},{value:"3. Run SQL Query",id:"3-run-sql-query",level:3},{value:"4. Obtain Group IDs",id:"4-obtain-group-ids",level:3},{value:"5. Copy and Modify Query",id:"5-copy-and-modify-query",level:3},{value:"6. Example Query",id:"6-example-query",level:3},{value:"7. Verify Monitor Set",id:"7-verify-monitor-set",level:3},{value:"8. Set Alert Template",id:"8-set-alert-template",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"steps",children:"Steps"}),"\n",(0,a.jsx)(t.h3,{id:"1-import-the-alert-template",children:"1. Import the Alert Template"}),"\n",(0,a.jsxs)(t.p,{children:["Import the Alert Template ",(0,a.jsx)(t.code,{children:"\u25b3 Custom - Ticket Creation Computer"}),". The alert template should not be performing any action for the ",(0,a.jsx)(t.code,{children:"Warning"})," state."]}),"\n",(0,a.jsx)(t.h3,{id:"2-validate-the-script",children:"2. Validate the Script"}),"\n",(0,a.jsxs)(t.p,{children:["Validate that the ",(0,a.jsx)(t.a,{href:"/docs/cwa/scripts/63beba3c-f4a6-41a5-98e2-d4e4ce885035",children:"Script - Ticket Creation - Computer"})," script was imported as well."]}),"\n",(0,a.jsx)(t.h3,{id:"3-run-sql-query",children:"3. Run SQL Query"}),"\n",(0,a.jsx)(t.p,{children:"Run this SQL query from a RAWSQL monitor set to import the required search."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"INSERT INTO `sensorchecks`\r\nSELECT\r\n'' as `SensID`,\r\n'HP Servers' as `Name`,\r\n'SELECT \\n   computers.computerid as `Computer Id`,\\n   computers.name as `Computer Name`,\\n   clients.name as `Client Name`,\\n   computers.domain as `Computer Domain`,\\n   computers.username as `Computer User`,\\n   IF(INSTR(computers.os, \\'server\\')>0, 1, 0) as `Computer.OS.IsServer`,\\n   Computers.BiosMFG as `Computer.Hardware.Manufacturer`\\nFROM Computers \\nLEFT JOIN inv_operatingsystem ON (Computers.ComputerId=inv_operatingsystem.ComputerId)\\nLEFT JOIN Clients ON (Computers.ClientId=Clients.ClientId)\\nLEFT JOIN Locations ON (Computers.LocationId=Locations.LocationID)\\n WHERE \\n((((IF(INSTR(computers.os, \\'server\\')>0, 1, 0)<>0) AND (((Instr(Computers.BiosMFG,\\'HPE\\') > 0) OR (Instr(Computers.BiosMFG,\\'Hewlett-Packard\\') > 0))))))\\n' as `SQL`,\r\n'4' as `QueryType`,\r\n'READONLY' as `ListData`,\r\n'3' as `FolderID`,\r\n'f96d2c44-49a1-11e0-8c4a-0050568b7d1e' as `GUID`,\r\n'<LabTechAbstractSearch><asn><st>AndNode</st><cn><asn><st>AndNode</st><cn><asn><st>ComparisonNode</st><lon>Computer.OS.IsServer</lon><lok>Computer.OS.IsServer</lok><lmo>IsTrue</lmo><dv>NULL</dv><dk>NULL</dk></asn><asn><st>OrNode</st><cn><asn><st>ComparisonNode</st><lon>Computer.Hardware.Manufacturer</lon><lok>Computer.Hardware.Manufacturer</lok><lmo>Contains</lmo><dv>HPE</dv><dk>HPE</dk></asn><asn><st>ComparisonNode</st><lon>Computer.Hardware.Manufacturer</lon><lok>Computer.Hardware.Manufacturer</lok><lmo>Contains</lmo><dv>Hewlett-Packard</dv><dk>Hewlett-Packard</dk></asn></cn></asn></cn></asn></cn></asn></LabTechAbstractSearch>' as `SearchXML`,\r\n(NULL) as `UpdatedBy`,\r\n(NULL) as `UpdateDate`\r\nFROM  (SELECT MIN(computerid) FROM computers) a\r\nWHERE (SELECT count(*) FROM SensorChecks where `GUID` = 'f96d2c44-49a1-11e0-8c4a-0050568b7d1e') = 0;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"4-obtain-group-ids",children:"4. Obtain Group IDs"}),"\n",(0,a.jsx)(t.p,{children:"Obtain the groupid(s) of the group(s) that the remote monitor should be applied to."}),"\n",(0,a.jsx)(t.h3,{id:"5-copy-and-modify-query",children:"5. Copy and Modify Query"}),"\n",(0,a.jsxs)(t.p,{children:["Copy the following query and replace ",(0,a.jsx)(t.code,{children:"YOUR COMMA SEPARATED LIST OF GROUPID(S)"})," with the groupid(s) of the relevant groups. (The string to replace can be found at the very bottom of the query, right after ",(0,a.jsx)(t.strong,{children:"WHERE"}),")."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"Set @searchid = (SELECT sensid FROM sensorchecks WHERE `GUID` = 'f96d2c44-49a1-11e0-8c4a-0050568b7d1e');\r\nINSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n@searchid as `SearchID`,\r\n'ProVal - Production - HP Hardware Monitoring' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'HP Event Log Errors Detected on %CLIENTNAME%\\\\%COMPUTERNAME%~~~No HP Hardware alerts have been detected in the last 60 minutes.!!!HP Event Log Errors Detected on %CLIENTNAME%\\\\%COMPUTERNAME%~~~HP Hardware Monitoring has detected an issue with %Computername% at %clientname%. The message details are outlined below: /r/n/r/n%RESULT%' as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'3600' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe -ExecutionPolicy Bypass -Command \"$ErroractionPreference= \\'SilentlyContinue\\'; $startTime = (Get-Date).AddMinutes(-60) ;$excludeMessages=\\'Connectivity has been lost for the NIC|SNMP trap to the Compaq Remote Insight Board trap due to processing error|A network interface has failed|HP WBEM data was captured|Network Adapter Link\\'; $providers = \\'Smart Array Events|Storage Agents|Server Agents|Nic Agents|hp|Cissesrv|HPE\\'; Get-WinEvent -FilterHashTable @{Logname = \\'Application\\',\\'System\\'; StartTime = $StartTime; Level = 1,2 } | Where-Object { $_.ProviderName -match $Providers -and $_.message -notmatch $excludeMessages } | Select-Object Id, TimeCreated, LogName, ProviderName, LevelDisplayName, Message | Group-Object -Property Id | Sort-Object -Property Count -Descending | Select-Object -Property count, group | Foreach-Object {$mostrecent = $_.Group | Sort-Object -Property TimeCreated -Descending | Select-Object -First 1; [pscustomobject]@{Occurrences=$_.Count; EventID=$mostrecent.id; Logname=$Mostrecent.Logname; Source=$MostRecent.ProviderName; MostRecentDate=$mostrecent.TimeCreated; Level=$Mostrecent.LevelDisplayName; Message = $MostRecent.Message }}\"' as `DataOut`,\r\n'16' as `Comparor`,\r\n'10|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))|11|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))%7C(^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Occurrences)|10|^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Occurrences' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'21' as `Category`,\r\n'0' as `TicketCategory`,\r\n'1' as `ScriptTarget`,\r\nUUID() as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (YOUR COMMA SEPARATED LIST OF GROUPID(S))\r\nAND m.groupid NOT IN  (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - HP Hardware Monitoring')\n"})}),"\n",(0,a.jsx)(t.h3,{id:"6-example-query",children:"6. Example Query"}),"\n",(0,a.jsx)(t.p,{children:"An example of the query with groupids and modified thresholds."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-sql",children:"Set @searchid = (SELECT sensid FROM sensorchecks WHERE `GUID` = 'f96d2c44-49a1-11e0-8c4a-0050568b7d1e');\r\nINSERT INTO groupagents \r\nSELECT '' as `AgentID`,\r\n`groupid` as `GroupID`,\r\n@searchid as `SearchID`,\r\n'ProVal - Production - HP Hardware Monitoring' as `Name`,\r\n'6' as `CheckAction`,\r\n'1' as `AlertAction`,\r\n'HP Event Log Errors Detected on %CLIENTNAME%\\\\%COMPUTERNAME%~~~No HP Hardware alerts have been detected in the last 60 minutes.!!!HP Event Log Errors Detected on %CLIENTNAME%\\\\%COMPUTERNAME%~~~HP Hardware Monitoring has detected an issue with %Computername% at %clientname%. The message details are outlined below: /r/n/r/n%RESULT%' as `AlertMessage`,\r\n'0' as `ContactID`,\r\n'3600' as `interval`,\r\n'127.0.0.1' as `Where`,\r\n'7' as `What`,\r\n'C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe -ExecutionPolicy Bypass -Command \"$ErroractionPreference= \\'SilentlyContinue\\'; $startTime = (Get-Date).AddMinutes(-60) ;$excludeMessages=\\'Connectivity has been lost for the NIC|SNMP trap to the Compaq Remote Insight Board trap due to processing error|A network interface has failed|HP WBEM data was captured|Network Adapter Link\\'; $providers = \\'Smart Array Events|Storage Agents|Server Agents|Nic Agents|hp|Cissesrv|HPE\\'; Get-WinEvent -FilterHashTable @{Logname = \\'Application\\',\\'System\\'; StartTime = $StartTime; Level = 1,2 } | Where-Object { $_.ProviderName -match $Providers -and $_.message -notmatch $excludeMessages } | Select-Object Id, TimeCreated, LogName, ProviderName, LevelDisplayName, Message | Group-Object -Property Id | Sort-Object -Property Count -Descending | Select-Object -Property count, group | Foreach-Object {$mostrecent = $_.Group | Sort-Object -Property TimeCreated -Descending | Select-Object -First 1; [pscustomobject]@{Occurrences=$_.Count; EventID=$mostrecent.id; Logname=$Mostrecent.Logname; Source=$MostRecent.ProviderName; MostRecentDate=$mostrecent.TimeCreated; Level=$Mostrecent.LevelDisplayName; Message = $MostRecent.Message }}\"' as `DataOut`,\r\n'16' as `Comparor`,\r\n'10|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))|11|((^((OK){0,}(\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})$)%7C(^$))%7C(^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Occurrences)|10|^((\\\\r\\\\n){0,}[\\\\r\\\\n]{0,}\\\\s{0,})Occurrences' as `DataIn`,\r\n'' as `IDField`,\r\n'1' as `AlertStyle`,\r\n'0' as `ScriptID`,\r\n'' as `datacollector`,\r\n'21' as `Category`,\r\n'0' as `TicketCategory`,\r\n'1' as `ScriptTarget`,\r\nUUID() as `GUID`,\r\n'root' as `UpdatedBy`,\r\n(NOW()) as `UpdateDate`\r\nFROM mastergroups m\r\nWHERE m.groupid IN (678, 536)\r\nAND m.groupid NOT IN  (SELECT DISTINCT groupid FROM groupagents WHERE `Name` = 'ProVal - Production - HP Hardware Monitoring')\n"})}),"\n",(0,a.jsx)(t.h3,{id:"7-verify-monitor-set",children:"7. Verify Monitor Set"}),"\n",(0,a.jsx)(t.p,{children:"Check the concerned groups to ensure the monitor set is created and configured with the correct search."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Limit to:"})," ",(0,a.jsx)(t.code,{children:"HP Servers"})]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Example Image",src:r(62013).A+"",width:"1000",height:"462"})}),"\n",(0,a.jsx)(t.h3,{id:"8-set-alert-template",children:"8. Set Alert Template"}),"\n",(0,a.jsx)(t.p,{children:"Set the appropriate alert template."})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},62013:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/image_1-089cf1648d3517e00ca393501de27579.png"},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>i});var n=r(296540);const a={},s=n.createContext(a);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);