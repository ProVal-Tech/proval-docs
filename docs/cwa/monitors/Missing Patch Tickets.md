---
id: '7310b9b3-8209-4067-8b83-81ab9345e2f4'
title: 'Auto Close Missing Patch Tickets Monitor'
title_meta: 'Auto Close Missing Patch Tickets Monitor'
keywords: ['monitor', 'tickets', 'patches', 'automation', 'alert']
description: 'This document outlines the setup for a monitor that triggers a script to automatically resolve new or existing tickets generated by the Missing Patches detection solution, specifically for machines with three or fewer missing patches.'
tags: ['alert', 'automation', 'database', 'installation', 'configuration', 'windows']
draft: false
unlisted: false
---
## Summary

This monitor will trigger a script to resolve any new or existing tickets generated by the Missing Patches detection solution. The script will only be initiated on machines that have three or less missing patches.

## Dependencies

[CWM - Automate - Script - Client Specific - Auto Close - Missing Patch Tickets [Autofix]*](https://proval.itglue.com/DOC-5078775-12589458)

## Target

Global

## Alert Template

**Name:** `△ CUSTOM - Auto Close - Missing Patch Tickets`

**SQL Insert Query:**
```
INSERT INTO `alerttemplate` (
  `Name`, `Comment`, `Last_User`, `Last_Date`, 
  `GUID`
) 
SELECT 
  '△ CUSTOM - Auto Close - Missing Patch Tickets' AS `Name`, 
  '△ CUSTOM - Auto Close - Missing Patch Tickets' AS `Comment`, 
  'PRONOC' AS `Last_User`, 
  (NOW()) AS `Last_Date`, 
  '40e61fa3-7efa-4efe-a8ae-76fe95604efa' AS `GUID` 
WHERE 
  (
    SELECT 
      COUNT(*) 
    FROM 
      alerttemplate 
    WHERE 
      GUID = '40e61fa3-7efa-4efe-a8ae-76fe95604efa'
  ) = '0';

INSERT INTO `alerttemplates` (
  `AlertActionID`, `DayOfWeek`, `TimeStart`, 
  `TimeEnd`, `AlertAction`, `ContactID`, 
  `UserID`, `ScriptID`, `Trump`, `GUID`, 
  `WarningAction`
) 
SELECT 
  (
    SELECT 
      alertactionid 
    FROM 
      alerttemplate 
    WHERE 
      `GUID` = '40e61fa3-7efa-4efe-a8ae-76fe95604efa'
  ) AS `AlertActionid`, 
  '127' AS `DayOfWeek`, 
  '00:00:00' AS `TimeStart`, 
  '23:59:00' AS `TimeEnd`, 
  '512' AS `AlertAction`, 
  '-2' AS `ContactID`, 
  '0' AS `UserID`, 
  (
    SELECT 
      Scriptid 
    FROM 
      lt_scripts 
    WHERE 
      scriptGUID = 'c9164787-d570-11ed-bf6a-000c295e5f21'
  ) AS `Scriptid`, 
  '0' AS `Trump`, 
  '2f6e8c31-b4fb-4ede-b20f-5f5ea75951db' AS `GUID`, 
  '512' AS `WarningAction` 
WHERE 
  (
    SELECT 
      COUNT(*) 
    FROM 
      alerttemplates 
    WHERE 
      GUID = '2f6e8c31-b4fb-4ede-b20f-5f5ea75951db'
  ) = '0';
```

**Note:** Ensure that the [CWM - Automate - Script - Client Specific - Auto Close - Missing Patch Tickets [Autofix]*](https://proval.itglue.com/DOC-5078775-12589458) script is imported before creating the alert template.






