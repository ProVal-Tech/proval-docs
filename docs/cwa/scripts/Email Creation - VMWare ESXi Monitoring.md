---
id: '642f7615-925c-481f-b4bf-8d6b2c9ad6de'
title: 'Autofix Script for ESXi Monitoring'
title_meta: 'Autofix Script for ESXi Monitoring'
keywords: ['esxi', 'monitoring', 'alert', 'email', 'notification']
description: 'This document describes an Autofix script designed for monitoring ESXi hosts. It outlines the requirements for use, including necessary device IDs and email configurations, and provides details on the variables utilized in alert notifications. The script is intended to automate email alerts for detected issues, ensuring timely notifications to designated contacts.'
tags: ['email', 'esxi']
draft: false
unlisted: false
---

## Summary

This script is intended for use as an Autofix script in conjunction with the internal monitor sets of an ESXi Host. The use of this script is subject to the following requirements:

The Device ID of the ESXi host must be specified as the Test Value/Result in the monitor set. All relevant data to be included in the email must be specified in the Field Name/Identity Field.

The script makes use of several variables that can be referenced in the monitor’s alerting tab, including `@ESXHostName@`, `@ESXVersion@`, `@ESXMakeModel@`, `@ESXIPAddress@`, and `@ESXSN@`. An example of an email subject generated by this script is “ESXi Bad Sensors Detected - @ESXHostName@ (@ESXIPAddress@),” which incorporates the Host Name and IP address of the ESXi host.

It creates an email and sends that email to the designated contact identified in the system property `_sysTicketDefaultEmail`. Therefore, an email address to notify must be set in the `_sysTicketDefaultEmail` property to use the script.

## Sample Run

This script should be utilized as an autofix to a monitor.

It is being used with the `△ Custom - Email Creation - VMWare ESXi Monitoring` alert template.

## Variables

| Name           | Description                             |
|----------------|-----------------------------------------|
| ESXHostName    | Name of the ESXi host                   |
| ESXVersion     | ESXi Version of the host                |
| ESXMakeModel   | Manufacturer and Model of the host      |
| ESXIPAddress   | IP address of the host                  |
| ESXSN          | Serial Number of the host               |

## Global Parameters

| Name              | Example      | Required | Description                                           |
|-------------------|--------------|----------|------------------------------------------------------|
| EmailOnSuccess    | 0 or 1      | True     | 0 disables emailing a success email. 1 enables emailing a success email. |

#### System Properties

| Name                        | Example                                | Required | Description              |
|-----------------------------|----------------------------------------|----------|--------------------------|
| `_sysTicketDefaultEmail`    | [support@provaltech.com](mailto:support@provaltech.com) | True     | Email address to alert    |

## Output

- Script Log
- Email

