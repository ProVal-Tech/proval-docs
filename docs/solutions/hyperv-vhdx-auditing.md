---
id: 'ac904ba5-b501-4137-9f09-9960c88f4aa4'
slug: /ac904ba5-b501-4137-9f09-9960c88f4aa4
title: 'Hyper-V VHDX Auditing'
title_meta: 'Hyper-V VHDX Auditing'
keywords: ['hyper-v', 'vhdx', 'virtualization', 'drive', 'vhdx-auditing']
description: 'Retrieves detailed Hyper-V VHD/VHDX information and stores it as an HTML table in a NinjaRMM Custom Field.'
tags: ['hyper-v', 'auditing', 'disk', 'diskspace']
draft: false
unlisted: false
---

## Purpose

Collects detailed information about Hyper-V VHD and VHDX files and saves the results as an HTML table in a NinjaRMM custom field.

## Associated content

| Content | Type | Purpose |
|---|---:|---|
| [cPVAL Hyper-V Vhdx Details](/docs/130fecda-6c10-4271-a55e-1aa19c8e8042) | Custom Field | Holds the HTML-formatted inventory of Hyper-V virtual hard disks (VHD/VHDX). |
| [Audit Hyper-V VHDX](/docs/73c2e2db-d5ee-4d7f-80eb-6593abe5abbf) | Automation | Gathers VHD/VHDX details and writes them to the custom field. |
| [Hyper-V Vhdx Audit](/docs/6ae9f202-1695-4894-9e26-4ab72275fd43) | Task | Runs the automation on Hyper-V hosts on a scheduled cadence. |

## Additional dependencies

| Content | Type | Purpose |
|---|---:|---|
| [cPVAL - Roles Detected](/docs/e9ec73dd-98b1-4436-a027-4ee8906f7cba) | Custom Field | Records detected server roles for Windows systems. |
| [cPVAL - Server Role - Hyper-V Host](/docs/cf5d5ac8-bc9c-400d-a130-2e19866df942) | Group | A group containing Windows servers with the `Hyper-V` role. |
| [Server Roles Detection and Grouping for NinjaOne](/docs/56ed4b40-11ce-4f8d-b1ca-c897d2c496e6) | Solution | Classifies servers into role-based groups used by the automation. |

## Implementation

1. Import and configure the [Server Roles Detection and Grouping for NinjaOne](/docs/56ed4b40-11ce-4f8d-b1ca-c897d2c496e6) solution.
2. Create the [cPVAL Hyper-V Vhdx Details](/docs/130fecda-6c10-4271-a55e-1aa19c8e8042) custom field.
3. Create the [Audit Hyper-V VHDX](/docs/73c2e2db-d5ee-4d7f-80eb-6593abe5abbf) automation.
4. Create the [Hyper-V Vhdx Audit](/docs/6ae9f202-1695-4894-9e26-4ab72275fd43) task to run the automation daily at `02:00 PM` against the [cPVAL - Server Role - Hyper-V Host](/docs/cf5d5ac8-bc9c-400d-a130-2e19866df942) group.

## FAQ

**Q: What does this solution do?**  
**A:** Collects Hyper-V VHD/VHDX details and stores them as an HTML table in the [cPVAL Hyper-V Vhdx Details](/docs/130fecda-6c10-4271-a55e-1aa19c8e8042) custom field.

**Q: Where is the data stored?**  
**A:** In the [cPVAL Hyper-V Vhdx Details](/docs/130fecda-6c10-4271-a55e-1aa19c8e8042) custom field.

**Q: Which automation populates it?**  
**A:** The [Audit Hyper-V VHDX](/docs/73c2e2db-d5ee-4d7f-80eb-6593abe5abbf) automation (script referenced in the automation configuration repository).

**Q: What are the prerequisites?**  
**A:** The target must be a Windows server with the `Hyper-V` role; ensure the [Server Roles Detection and Grouping](/docs/56ed4b40-11ce-4f8d-b1ca-c897d2c496e6) solution is configured so Hyper-V hosts are targeted.

**Q: How often should it run?**  
**A:** It runs the automation at `02:00 PM` daily.

**Q: Can I edit the custom field manually?**  
**A:** No â€” the custom field is auto-populated by the automation. The field footer notes: "Auto-generated by script. Do not edit manually."

**Q: How do I interpret the table?**  
**A:** The table includes disk path, allocation type (Dynamic/Fixed), current file size, fragmentation percentage, and a `DataCollectionTime` column showing when the data was collected.
